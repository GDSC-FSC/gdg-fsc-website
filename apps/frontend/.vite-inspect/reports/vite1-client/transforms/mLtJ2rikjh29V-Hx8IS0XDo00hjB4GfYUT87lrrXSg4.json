{
  "resolvedId": "/home/wombocombo/github/wrk/gdg-fsc-website/apps/frontend/src/providers/core/server/query-client.ts",
  "transforms": [
    {
      "name": "__load__",
      "result": "/**\n * Copyright 2025 Mike Odnis\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { logger } from '@gdg-fsc/utils';\nimport {\n  defaultShouldDehydrateQuery,\n  MutationCache,\n  QueryCache,\n  QueryClient,\n} from '@tanstack/react-query';\nimport { cache } from 'react';\nimport SuperJSON from 'superjson';\n\n/**\n * Instantiates (and memoizes per invocation context) a configured TanStack QueryClient instance\n * for use on the server-side. This QueryClient setup attaches logging for query and mutation\n * lifecycle events and custom serialization using SuperJSON.\n *\n * Uses React's `cache` utility to ensure a stable instance per execution context on the server.\n *\n * @function createQueryClient\n * @returns {QueryClient} A strongly-typed, memoized instance of QueryClient\n * @throws {Error} If QueryClient instantiation fails unexpectedly\n * @see {@link https://tanstack.com/query/v4/docs/framework/react/reference/QueryClient TanStack QueryClient Documentation}\n * @example\n * // Get a QueryClient instance\n * const queryClient = createQueryClient();\n * @readonly\n * @public\n * @web\n * @version 1.0.0\n * @author Mike Odnis <WomB0ComB0>\n */\nexport const createQueryClient = cache(() => {\n  let queryClient: QueryClient | null = null;\n\n  /**\n   * Returns a singleton QueryClient instance for the server context.\n   *\n   * @returns {QueryClient} A server-safe QueryClient instance\n   * @throws {Error} If QueryClient configuration fails\n   * @example\n   * const qc = createQueryClient();\n   */\n  return (): QueryClient => {\n    queryClient ??= new QueryClient({\n      queryCache: new QueryCache({\n        /**\n         * Handles errors encountered during server-side queries.\n         * @param {unknown} error - The error thrown by the query.\n         * @param {import('@tanstack/react-query').Query} query - The Query that caused the error.\n         * @returns {void}\n         */\n        onError: (error, query) => {\n          logger.error(`Query error: ${error}`, query);\n        },\n        /**\n         * Handles successful query results.\n         * @param {unknown} data - The resolved data from the query.\n         * @param {import('@tanstack/react-query').Query} query - The Query that succeeded.\n         * @returns {void}\n         */\n        onSuccess: (data, query) => {\n          logger.debug('Query success', { data, query });\n        },\n        /**\n         * Handles settled queries, regardless of outcome.\n         * @param {unknown} data\n         * @param {unknown} error\n         * @param {import('@tanstack/react-query').Query} query\n         * @returns {void}\n         */\n        onSettled: (data, error, query) => {\n          logger.debug('Query settled', { data, error, query });\n        },\n      }),\n      mutationCache: new MutationCache({\n        /**\n         * Handles errors in mutation executions.\n         * @param {Error} error\n         * @returns {Promise<void>}\n         */\n        onError: (error) => {\n          logger.error(`Mutation error: ${error}`, {\n            message: error.message,\n            stack: error.stack,\n          });\n          return Promise.resolve();\n        },\n        /**\n         * Logs successful mutation executions.\n         * @param {unknown} data\n         * @param {unknown} variables\n         * @param {unknown} context\n         * @param {import('@tanstack/react-query').Mutation | undefined} mutation\n         * @returns {Promise<void>}\n         */\n        onSuccess: (data, variables, context, mutation) => {\n          logger.info('Mutation succeeded', {\n            data,\n            variables,\n            context,\n            mutationKey: mutation?.options?.mutationKey,\n            mutationFn: mutation?.options?.mutationFn?.name || 'anonymous',\n          });\n          return Promise.resolve();\n        },\n      }),\n      defaultOptions: {\n        dehydrate: {\n          /**\n           * Serializes dehydratable data in a type-safe manner with SuperJSON.\n           * @param {unknown} data\n           * @returns {string}\n           */\n          serializeData: SuperJSON.serialize,\n          /**\n           * Determines if a query should be dehydrated.\n           * @param {import('@tanstack/react-query').Query} query\n           * @returns {boolean}\n           */\n          shouldDehydrateQuery: (query) =>\n            defaultShouldDehydrateQuery(query) || query.state.status === 'pending',\n        },\n        hydrate: {\n          /**\n           * Deserializes hydrated data from SuperJSON.\n           * @param {string} data\n           * @returns {unknown}\n           */\n          deserializeData: SuperJSON.deserialize,\n        },\n      },\n    });\n    return queryClient;\n  };\n});\n",
      "start": 1768772628330,
      "end": 1768772628330
    },
    {
      "name": "sentry-vite-component-name-annotate-plugin",
      "start": 1768772628330,
      "end": 1768772628330,
      "order": "pre"
    },
    {
      "name": "comlink",
      "start": 1768772628337,
      "end": 1768772628337,
      "order": "normal"
    },
    {
      "name": "sentry-vite-bundle-size-optimizations-plugin",
      "start": 1768772628337,
      "end": 1768772628338,
      "order": "normal"
    },
    {
      "name": "vite-plugin-csp-guard",
      "start": 1768772628338,
      "end": 1768772628338,
      "order": "post-post"
    }
  ]
}
