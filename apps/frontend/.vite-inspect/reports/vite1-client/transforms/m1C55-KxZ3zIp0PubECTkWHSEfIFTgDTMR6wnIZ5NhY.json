{
  "resolvedId": "/home/wombocombo/github/wrk/gdg-fsc-website/apps/frontend/src/components/data-loader.tsx",
  "transforms": [
    {
      "name": "__load__",
      "result": "'use client';\n\n/**\n * Copyright 2025 Mike Odnis\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  fetcher,\n  FetcherError,\n  type FetcherOptions,\n  get,\n  logger,\n  parseCodePathDetailed,\n  type QueryParams,\n  requestQueue,\n  ValidationError,\n} from '@/utils';\nimport { FetchHttpClient } from '@effect/platform';\nimport type { QueryKey } from '@tanstack/react-query';\nimport {\n  useQueryClient,\n  useSuspenseQuery,\n  type UseSuspenseQueryOptions,\n} from '@tanstack/react-query';\nimport { Effect, pipe, Schema } from 'effect';\nimport React, { Suspense, useCallback, useMemo } from 'react';\nimport ClientError from './client-error';\nimport Loader from './loader';\n/**\n * @module effect-data-loader\n *\n * Enhanced DataLoader for React using React Query, Effect, and Effect Schema validation.\n *\n * This module provides a generic, type-safe React component and hook for loading data asynchronously\n * with advanced error handling, runtime validation, caching, and developer experience. It is designed\n * to work with Effect, Effect Schema, and React Query, supporting features like retries, timeouts,\n * schema validation, optimistic updates, and more.\n *\n * ## Features\n * - Type-safe data loading for React components with Effect Schema validation\n * - Suspense support\n * - Runtime type validation with detailed error messages\n * - Customizable error and loading components\n * - Query caching and invalidation\n * - Optimistic updates\n * - Retry and timeout logic\n * - Render props and hook API\n * @see DataLoader\n * @see useDataLoader\n * @example\n * ```tsx\n * import { DataLoader } from './effect-data-loader';\n * import { Schema } from 'effect';\n *\n * const UserSchema = Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * });\n *\n * function UserList() {\n *   return (\n *     <DataLoader url=\"/api/users\" schema={UserSchema}>\n *       {(users) => (\n *         <ul>{users.map(u => <li key={u.id}>{u.name}</li>)}</ul>\n *       )}\n *     </DataLoader>\n *   );\n * }\n * ```\n */\n/**\n * Enhanced render props with additional query state and actions.\n *\n * @template T The type of the loaded data.\n */\nexport interface DataLoaderRenderProps<T> {\n  /** Manually trigger a refetch */\n  refetch: () => Promise<void>;\n  /** Whether the query is currently refetching */\n  isRefetching: boolean;\n  /** Query client for advanced operations */\n  queryClient: ReturnType<typeof useQueryClient>;\n  /** Invalidate this query's cache */\n  invalidate: () => Promise<void>;\n  /** Set query data optimistically */\n  setQueryData: (data: T | ((prev: T) => T)) => void;\n}\n\n/**\n * Base props for DataLoader without schema.\n */\nexport interface BaseDataLoaderProps<T> {\n  /** Additional props */\n  [key: string]: unknown;\n  /** URL to fetch data from */\n  url: string;\n  /** Additional React Query options */\n  queryOptions?: Partial<UseSuspenseQueryOptions<T, Error, T, QueryKey>>;\n  /** Custom loading component */\n  LoadingComponent?: React.ReactNode;\n  /** Custom error component */\n  ErrorComponent?: React.ComponentType<{ error: Error; retry: () => void }> | React.ReactElement;\n  /** Fetcher options (retries, timeout, etc.) */\n  options?: FetcherOptions<T>;\n  /** Query parameters */\n  params?: QueryParams;\n  /** Custom query key override */\n  queryKey?: QueryKey;\n  /** Callback fired when data is successfully loaded */\n  onSuccess?: (data: T) => void;\n  /** Callback fired when an error occurs */\n  onError?: (error: Error) => void;\n  /** Transform the data before passing to children */\n  transform?: (data: any) => T;\n  /** Stale time in milliseconds (default: 5 minutes) */\n  staleTime?: number;\n  /** Refetch interval in milliseconds or false to disable (default: 5 minutes) */\n  refetchInterval?: number | false;\n  /** Whether to refetch on window focus (default: false) */\n  refetchOnWindowFocus?: boolean;\n  /** Whether to refetch on reconnect (default: true) */\n  refetchOnReconnect?: boolean;\n}\n\n/**\n * Props for DataLoader without schema (manual typing).\n */\nexport interface DataLoaderProps<T> extends BaseDataLoaderProps<T> {\n  /**\n   * Render prop that receives data and optional utilities.\n   */\n  children:\n    | ((data: T) => React.ReactNode)\n    | ((data: T, utils: DataLoaderRenderProps<T>) => React.ReactNode);\n  /** Effect Schema for runtime validation (optional) */\n  schema?: never;\n}\n\n/**\n * Props for DataLoader with Effect Schema (automatic type inference).\n */\nexport interface DataLoaderPropsWithSchema<S extends Schema.Schema<any, any, never>>\n  extends BaseDataLoaderProps<Schema.Schema.Type<S>> {\n  /**\n   * Render prop that receives validated data and optional utilities.\n   */\n  children:\n    | ((data: Schema.Schema.Type<S>) => React.ReactNode)\n    | ((\n        data: Schema.Schema.Type<S>,\n        utils: DataLoaderRenderProps<Schema.Schema.Type<S>>,\n      ) => React.ReactNode);\n  /** Effect Schema for runtime validation */\n  schema: S;\n  /** Fetcher options with schema */\n  options?: FetcherOptions<Schema.Schema.Type<S>> & { schema: S };\n}\n\n/**\n * Enhanced DataLoader component with Effect Schema validation, better error handling, caching, and developer experience.\n *\n * @example Without schema\n * ```tsx\n * <DataLoader<User[]> url=\"/api/users\">\n *   {(users) => <UserList users={users} />}\n * </DataLoader>\n * ```\n *\n * @example With schema (automatic type inference)\n * ```tsx\n * const UsersSchema = Schema.Array(Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * }));\n *\n * <DataLoader url=\"/api/users\" schema={UsersSchema}>\n *   {(users) => <UserList users={users} />} // users is fully typed!\n * </DataLoader>\n * ```\n */\nexport function DataLoader<T = unknown>(props: DataLoaderProps<T>): React.ReactElement;\nexport function DataLoader<S extends Schema.Schema<any, any, never>>(\n  props: DataLoaderPropsWithSchema<S>,\n): React.ReactElement;\nexport function DataLoader<T = unknown, S extends Schema.Schema<any, any, never> = any>({\n  children,\n  url,\n  queryOptions = {},\n  LoadingComponent = <Loader />,\n  ErrorComponent = ClientError,\n  options = {},\n  params = {},\n  queryKey,\n  onSuccess,\n  onError,\n  transform,\n  staleTime = 1_000 * 60 * 5, // 5 minutes\n  refetchInterval = 1_000 * 60 * 5, // 5 minutes\n  refetchOnWindowFocus = false,\n  refetchOnReconnect = true,\n  schema,\n}: (DataLoaderProps<T> | DataLoaderPropsWithSchema<S>) & {\n  schema?: S;\n}): React.ReactElement {\n  const queryClient = useQueryClient();\n\n  // Generate stable query key including schema\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = options?.headers;\n    const timeout = options?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, options, schema]);\n\n  // Enhanced fetcher options with better defaults and schema support\n  const fetcherOptions = useMemo((): FetcherOptions<any> => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: (err) => {\n        const path = parseCodePathDetailed(url, fetcher);\n        logger.info(`[DataLoader]: ${path}`);\n\n        if (err instanceof FetcherError) {\n          logger.error(`[DataLoader]: Status ${err.status}`, err.responseData);\n        } else if (err instanceof ValidationError) {\n          logger.error(`[DataLoader]: Validation failed - ${err.getProblemsString()}`);\n          logger.error('[DataLoader]: Invalid data:', err.responseData);\n        } else {\n          logger.error('[DataLoader]: Unexpected error', err);\n        }\n\n        // Call user-provided error handler\n        if (onError && err instanceof Error) onError(err);\n      },\n      ...(options || null),\n    };\n\n    if (schema) return { ...baseOptions, schema };\n\n    return baseOptions;\n  }, [url, options, onError, schema]);\n\n  // Memoized query function with schema support and request deduplication\n  const queryFn = useCallback(async () => {\n    try {\n      // Wrap the Effect execution in the request queue for automatic deduplication\n      const result = await requestQueue.enqueue(\n        url,\n        'GET',\n        async () => {\n          const effect = pipe(\n            get(url, fetcherOptions, params),\n            Effect.provide(FetchHttpClient.layer),\n          );\n          return await Effect.runPromise(effect);\n        },\n        {\n          headers: fetcherOptions?.headers,\n          bypassDeduplication: false,\n        },\n      );\n\n      // Apply transformation if provided (note: schema validation happens first)\n      const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n      // Call success callback\n      if (onSuccess) onSuccess(finalResult);\n\n      return finalResult;\n    } catch (error) {\n      // Enhanced error handling for validation errors\n      if (error instanceof ValidationError) throw error;\n\n      if (error instanceof FetcherError) throw error;\n\n      // Wrap unexpected errors\n      throw new FetcherError(\n        error instanceof Error ? error.message : 'Unknown error occurred',\n        url,\n        undefined,\n        error,\n      );\n    }\n  }, [url, fetcherOptions, params, transform, onSuccess]);\n\n  // Enhanced query options\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        // Don't retry client errors (4xx)\n        if (\n          error instanceof ValidationError ||\n          (error instanceof FetcherError &&\n            error.status &&\n            error.status >= 400 &&\n            error.status < 500)\n        )\n          return false;\n\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions,\n    };\n\n    return baseOptions;\n  }, [\n    finalQueryKey,\n    queryFn,\n    staleTime,\n    refetchInterval,\n    refetchOnWindowFocus,\n    refetchOnReconnect,\n    queryOptions,\n  ]);\n\n  const { data, error, refetch, isRefetching } = useSuspenseQuery(queryOptionsWithDefaults);\n\n  // Enhanced render props\n  const renderProps = useMemo(() => {\n    const props: DataLoaderRenderProps<any> = {\n      refetch: async () => {\n        await refetch();\n      },\n      isRefetching,\n      queryClient,\n      invalidate: async () => {\n        await queryClient.invalidateQueries({ queryKey: finalQueryKey });\n      },\n      setQueryData: (newData: any) => {\n        queryClient.setQueryData(finalQueryKey, newData);\n      },\n    };\n    return props;\n  }, [refetch, isRefetching, queryClient, finalQueryKey]);\n\n  // Enhanced error component with retry capability and validation error support\n  const renderError = useCallback(\n    (error: Error) => {\n      if (React.isValidElement(ErrorComponent)) {\n        return React.cloneElement(ErrorComponent as React.ReactElement<any>, {\n          error,\n          retry: () => refetch(),\n        });\n      }\n\n      const Component = ErrorComponent as React.ComponentType<{\n        error: Error;\n        retry: () => void;\n      }>;\n      return <Component error={error} retry={() => refetch()} />;\n    },\n    [ErrorComponent, refetch],\n  );\n\n  // Determine how to call children function\n  const renderChildren = useCallback(() => {\n    if (typeof children === 'function') {\n      // Check if it's a function that accepts 2 parameters (data + utils)\n      try {\n        const result =\n          children.length > 1 ? (children as any)(data, renderProps) : (children as any)(data);\n        return result;\n      } catch {\n        // Fallback to simple call if inspection fails\n        return (children as any)(data);\n      }\n    }\n    return null;\n  }, [children, data, renderProps]);\n\n  return (\n    <Suspense fallback={LoadingComponent}>{error ? renderError(error) : renderChildren()}</Suspense>\n  );\n}\n\nDataLoader.displayName = 'DataLoader';\n\n/**\n * Hook version of DataLoader for use outside of JSX.\n */\nexport function useDataLoader<T = unknown>(\n  url: string,\n  options?: Omit<DataLoaderProps<T>, 'children' | 'LoadingComponent' | 'ErrorComponent'>,\n): ReturnType<typeof useSuspenseQuery<T, Error, T, QueryKey>>;\n\nexport function useDataLoader<S extends Schema.Schema<any, any, never>>(\n  url: string,\n  options: Omit<DataLoaderPropsWithSchema<S>, 'children' | 'LoadingComponent' | 'ErrorComponent'>,\n): ReturnType<\n  typeof useSuspenseQuery<Schema.Schema.Type<S>, Error, Schema.Schema.Type<S>, QueryKey>\n>;\n\nexport function useDataLoader(url: string, options: any = {}) {\n  const {\n    queryOptions = {},\n    options: fetcherOptions = {},\n    params = {},\n    queryKey,\n    onSuccess,\n    onError,\n    transform,\n    staleTime = 1_000 * 60 * 5,\n    refetchInterval = 1_000 * 60 * 5,\n    refetchOnWindowFocus = false,\n    refetchOnReconnect = true,\n    schema,\n  } = options;\n\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = fetcherOptions?.headers;\n    const timeout = fetcherOptions?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, fetcherOptions, schema]);\n\n  const enhancedFetcherOptions = useMemo(() => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: (err) => {\n        if (err instanceof ValidationError) {\n          logger.error(`[useDataLoader]: Validation failed - ${err.getProblemsString()}`);\n        }\n\n        if (typeof onError === 'function' && err instanceof Error) {\n          onError(err);\n        }\n      },\n      ...(fetcherOptions || null),\n    };\n\n    if (schema) {\n      return { ...baseOptions, schema };\n    }\n\n    return baseOptions;\n  }, [fetcherOptions, onError, schema]);\n\n  const queryFn = useCallback(async () => {\n    // Wrap the Effect execution in the request queue for automatic deduplication\n    const result = await requestQueue.enqueue(\n      url,\n      'GET',\n      async () => {\n        const effect = pipe(\n          get(url, enhancedFetcherOptions, params as QueryParams),\n          Effect.provide(FetchHttpClient.layer),\n        );\n        return await Effect.runPromise(effect);\n      },\n      {\n        headers: enhancedFetcherOptions?.headers,\n        bypassDeduplication: false,\n      },\n    );\n\n    const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n    if (typeof onSuccess === 'function') {\n      onSuccess(finalResult);\n    }\n\n    return finalResult;\n  }, [url, enhancedFetcherOptions, params, transform, onSuccess]);\n\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey as QueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        if (\n          error instanceof ValidationError ||\n          (error instanceof FetcherError &&\n            error.status &&\n            error.status >= 400 &&\n            error.status < 500)\n        ) {\n          return false;\n        }\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions,\n    };\n\n    return baseOptions;\n  }, [\n    finalQueryKey,\n    queryFn,\n    staleTime,\n    refetchInterval,\n    refetchOnWindowFocus,\n    refetchOnReconnect,\n    queryOptions,\n  ]);\n\n  return useSuspenseQuery(queryOptionsWithDefaults);\n}\n\nexport default DataLoader;\n",
      "start": 1768772628340,
      "end": 1768772628340,
      "sourcemaps": {
        "version": 3,
        "names": [
          "fetcher",
          "FetcherError",
          "FetcherOptions",
          "get",
          "logger",
          "parseCodePathDetailed",
          "QueryParams",
          "requestQueue",
          "ValidationError",
          "FetchHttpClient",
          "QueryKey",
          "useQueryClient",
          "useSuspenseQuery",
          "UseSuspenseQueryOptions",
          "Effect",
          "pipe",
          "Schema",
          "React",
          "Suspense",
          "useCallback",
          "useMemo",
          "ClientError",
          "Loader",
          "DataLoaderRenderProps",
          "refetch",
          "Promise",
          "isRefetching",
          "queryClient",
          "ReturnType",
          "invalidate",
          "setQueryData",
          "data",
          "T",
          "prev",
          "BaseDataLoaderProps",
          "key",
          "url",
          "queryOptions",
          "Partial",
          "Error",
          "LoadingComponent",
          "ReactNode",
          "ErrorComponent",
          "ComponentType",
          "error",
          "retry",
          "ReactElement",
          "options",
          "params",
          "queryKey",
          "onSuccess",
          "onError",
          "transform",
          "staleTime",
          "refetchInterval",
          "refetchOnWindowFocus",
          "refetchOnReconnect",
          "DataLoaderProps",
          "children",
          "utils",
          "schema",
          "DataLoaderPropsWithSchema",
          "Type",
          "S",
          "DataLoader",
          "props",
          "finalQueryKey",
          "headers",
          "timeout",
          "schemaKey",
          "format",
          "keyArray",
          "filter",
          "Boolean",
          "fetcherOptions",
          "baseOptions",
          "retries",
          "retryDelay",
          "err",
          "path",
          "info",
          "status",
          "responseData",
          "getProblemsString",
          "queryFn",
          "result",
          "enqueue",
          "effect",
          "provide",
          "layer",
          "runPromise",
          "bypassDeduplication",
          "finalResult",
          "message",
          "undefined",
          "queryOptionsWithDefaults",
          "failureCount",
          "attemptIndex",
          "Math",
          "min",
          "renderProps",
          "invalidateQueries",
          "newData",
          "renderError",
          "isValidElement",
          "cloneElement",
          "Component",
          "renderChildren",
          "length",
          "displayName",
          "useDataLoader",
          "Omit",
          "enhancedFetcherOptions"
        ],
        "sources": [
          "/home/wombocombo/github/wrk/gdg-fsc-website/apps/frontend/src/components/data-loader.tsx"
        ],
        "sourcesContent": [
          "'use client';\n\n/**\n * Copyright 2025 Mike Odnis\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  fetcher,\n  FetcherError,\n  type FetcherOptions,\n  get,\n  logger,\n  parseCodePathDetailed,\n  type QueryParams,\n  requestQueue,\n  ValidationError,\n} from '@/utils';\nimport { FetchHttpClient } from '@effect/platform';\nimport type { QueryKey } from '@tanstack/react-query';\nimport {\n  useQueryClient,\n  useSuspenseQuery,\n  type UseSuspenseQueryOptions,\n} from '@tanstack/react-query';\nimport { Effect, pipe, Schema } from 'effect';\nimport React, { Suspense, useCallback, useMemo } from 'react';\nimport ClientError from './client-error';\nimport Loader from './loader';\n/**\n * @module effect-data-loader\n *\n * Enhanced DataLoader for React using React Query, Effect, and Effect Schema validation.\n *\n * This module provides a generic, type-safe React component and hook for loading data asynchronously\n * with advanced error handling, runtime validation, caching, and developer experience. It is designed\n * to work with Effect, Effect Schema, and React Query, supporting features like retries, timeouts,\n * schema validation, optimistic updates, and more.\n *\n * ## Features\n * - Type-safe data loading for React components with Effect Schema validation\n * - Suspense support\n * - Runtime type validation with detailed error messages\n * - Customizable error and loading components\n * - Query caching and invalidation\n * - Optimistic updates\n * - Retry and timeout logic\n * - Render props and hook API\n * @see DataLoader\n * @see useDataLoader\n * @example\n * ```tsx\n * import { DataLoader } from './effect-data-loader';\n * import { Schema } from 'effect';\n *\n * const UserSchema = Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * });\n *\n * function UserList() {\n *   return (\n *     <DataLoader url=\"/api/users\" schema={UserSchema}>\n *       {(users) => (\n *         <ul>{users.map(u => <li key={u.id}>{u.name}</li>)}</ul>\n *       )}\n *     </DataLoader>\n *   );\n * }\n * ```\n */\n/**\n * Enhanced render props with additional query state and actions.\n *\n * @template T The type of the loaded data.\n */\nexport interface DataLoaderRenderProps<T> {\n  /** Manually trigger a refetch */\n  refetch: () => Promise<void>;\n  /** Whether the query is currently refetching */\n  isRefetching: boolean;\n  /** Query client for advanced operations */\n  queryClient: ReturnType<typeof useQueryClient>;\n  /** Invalidate this query's cache */\n  invalidate: () => Promise<void>;\n  /** Set query data optimistically */\n  setQueryData: (data: T | ((prev: T) => T)) => void;\n}\n\n/**\n * Base props for DataLoader without schema.\n */\nexport interface BaseDataLoaderProps<T> {\n  /** Additional props */\n  [key: string]: unknown;\n  /** URL to fetch data from */\n  url: string;\n  /** Additional React Query options */\n  queryOptions?: Partial<UseSuspenseQueryOptions<T, Error, T, QueryKey>>;\n  /** Custom loading component */\n  LoadingComponent?: React.ReactNode;\n  /** Custom error component */\n  ErrorComponent?: React.ComponentType<{ error: Error; retry: () => void }> | React.ReactElement;\n  /** Fetcher options (retries, timeout, etc.) */\n  options?: FetcherOptions<T>;\n  /** Query parameters */\n  params?: QueryParams;\n  /** Custom query key override */\n  queryKey?: QueryKey;\n  /** Callback fired when data is successfully loaded */\n  onSuccess?: (data: T) => void;\n  /** Callback fired when an error occurs */\n  onError?: (error: Error) => void;\n  /** Transform the data before passing to children */\n  transform?: (data: any) => T;\n  /** Stale time in milliseconds (default: 5 minutes) */\n  staleTime?: number;\n  /** Refetch interval in milliseconds or false to disable (default: 5 minutes) */\n  refetchInterval?: number | false;\n  /** Whether to refetch on window focus (default: false) */\n  refetchOnWindowFocus?: boolean;\n  /** Whether to refetch on reconnect (default: true) */\n  refetchOnReconnect?: boolean;\n}\n\n/**\n * Props for DataLoader without schema (manual typing).\n */\nexport interface DataLoaderProps<T> extends BaseDataLoaderProps<T> {\n  /**\n   * Render prop that receives data and optional utilities.\n   */\n  children:\n    | ((data: T) => React.ReactNode)\n    | ((data: T, utils: DataLoaderRenderProps<T>) => React.ReactNode);\n  /** Effect Schema for runtime validation (optional) */\n  schema?: never;\n}\n\n/**\n * Props for DataLoader with Effect Schema (automatic type inference).\n */\nexport interface DataLoaderPropsWithSchema<S extends Schema.Schema<any, any, never>>\n  extends BaseDataLoaderProps<Schema.Schema.Type<S>> {\n  /**\n   * Render prop that receives validated data and optional utilities.\n   */\n  children:\n    | ((data: Schema.Schema.Type<S>) => React.ReactNode)\n    | ((\n        data: Schema.Schema.Type<S>,\n        utils: DataLoaderRenderProps<Schema.Schema.Type<S>>,\n      ) => React.ReactNode);\n  /** Effect Schema for runtime validation */\n  schema: S;\n  /** Fetcher options with schema */\n  options?: FetcherOptions<Schema.Schema.Type<S>> & { schema: S };\n}\n\n/**\n * Enhanced DataLoader component with Effect Schema validation, better error handling, caching, and developer experience.\n *\n * @example Without schema\n * ```tsx\n * <DataLoader<User[]> url=\"/api/users\">\n *   {(users) => <UserList users={users} />}\n * </DataLoader>\n * ```\n *\n * @example With schema (automatic type inference)\n * ```tsx\n * const UsersSchema = Schema.Array(Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * }));\n *\n * <DataLoader url=\"/api/users\" schema={UsersSchema}>\n *   {(users) => <UserList users={users} />} // users is fully typed!\n * </DataLoader>\n * ```\n */\nexport function DataLoader<T = unknown>(props: DataLoaderProps<T>): React.ReactElement;\nexport function DataLoader<S extends Schema.Schema<any, any, never>>(\n  props: DataLoaderPropsWithSchema<S>,\n): React.ReactElement;\nexport function DataLoader<T = unknown, S extends Schema.Schema<any, any, never> = any>({\n  children,\n  url,\n  queryOptions = {},\n  LoadingComponent = <Loader />,\n  ErrorComponent = ClientError,\n  options = {},\n  params = {},\n  queryKey,\n  onSuccess,\n  onError,\n  transform,\n  staleTime = 1_000 * 60 * 5, // 5 minutes\n  refetchInterval = 1_000 * 60 * 5, // 5 minutes\n  refetchOnWindowFocus = false,\n  refetchOnReconnect = true,\n  schema,\n}: (DataLoaderProps<T> | DataLoaderPropsWithSchema<S>) & {\n  schema?: S;\n}): React.ReactElement {\n  const queryClient = useQueryClient();\n\n  // Generate stable query key including schema\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = options?.headers;\n    const timeout = options?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, options, schema]);\n\n  // Enhanced fetcher options with better defaults and schema support\n  const fetcherOptions = useMemo((): FetcherOptions<any> => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: (err) => {\n        const path = parseCodePathDetailed(url, fetcher);\n        logger.info(`[DataLoader]: ${path}`);\n\n        if (err instanceof FetcherError) {\n          logger.error(`[DataLoader]: Status ${err.status}`, err.responseData);\n        } else if (err instanceof ValidationError) {\n          logger.error(`[DataLoader]: Validation failed - ${err.getProblemsString()}`);\n          logger.error('[DataLoader]: Invalid data:', err.responseData);\n        } else {\n          logger.error('[DataLoader]: Unexpected error', err);\n        }\n\n        // Call user-provided error handler\n        if (onError && err instanceof Error) onError(err);\n      },\n      ...(options || null),\n    };\n\n    if (schema) return { ...baseOptions, schema };\n\n    return baseOptions;\n  }, [url, options, onError, schema]);\n\n  // Memoized query function with schema support and request deduplication\n  const queryFn = useCallback(async () => {\n    try {\n      // Wrap the Effect execution in the request queue for automatic deduplication\n      const result = await requestQueue.enqueue(\n        url,\n        'GET',\n        async () => {\n          const effect = pipe(\n            get(url, fetcherOptions, params),\n            Effect.provide(FetchHttpClient.layer),\n          );\n          return await Effect.runPromise(effect);\n        },\n        {\n          headers: fetcherOptions?.headers,\n          bypassDeduplication: false,\n        },\n      );\n\n      // Apply transformation if provided (note: schema validation happens first)\n      const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n      // Call success callback\n      if (onSuccess) onSuccess(finalResult);\n\n      return finalResult;\n    } catch (error) {\n      // Enhanced error handling for validation errors\n      if (error instanceof ValidationError) throw error;\n\n      if (error instanceof FetcherError) throw error;\n\n      // Wrap unexpected errors\n      throw new FetcherError(\n        error instanceof Error ? error.message : 'Unknown error occurred',\n        url,\n        undefined,\n        error,\n      );\n    }\n  }, [url, fetcherOptions, params, transform, onSuccess]);\n\n  // Enhanced query options\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        // Don't retry client errors (4xx)\n        if (\n          error instanceof ValidationError ||\n          (error instanceof FetcherError &&\n            error.status &&\n            error.status >= 400 &&\n            error.status < 500)\n        )\n          return false;\n\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions,\n    };\n\n    return baseOptions;\n  }, [\n    finalQueryKey,\n    queryFn,\n    staleTime,\n    refetchInterval,\n    refetchOnWindowFocus,\n    refetchOnReconnect,\n    queryOptions,\n  ]);\n\n  const { data, error, refetch, isRefetching } = useSuspenseQuery(queryOptionsWithDefaults);\n\n  // Enhanced render props\n  const renderProps = useMemo(() => {\n    const props: DataLoaderRenderProps<any> = {\n      refetch: async () => {\n        await refetch();\n      },\n      isRefetching,\n      queryClient,\n      invalidate: async () => {\n        await queryClient.invalidateQueries({ queryKey: finalQueryKey });\n      },\n      setQueryData: (newData: any) => {\n        queryClient.setQueryData(finalQueryKey, newData);\n      },\n    };\n    return props;\n  }, [refetch, isRefetching, queryClient, finalQueryKey]);\n\n  // Enhanced error component with retry capability and validation error support\n  const renderError = useCallback(\n    (error: Error) => {\n      if (React.isValidElement(ErrorComponent)) {\n        return React.cloneElement(ErrorComponent as React.ReactElement<any>, {\n          error,\n          retry: () => refetch(),\n        });\n      }\n\n      const Component = ErrorComponent as React.ComponentType<{\n        error: Error;\n        retry: () => void;\n      }>;\n      return <Component error={error} retry={() => refetch()} />;\n    },\n    [ErrorComponent, refetch],\n  );\n\n  // Determine how to call children function\n  const renderChildren = useCallback(() => {\n    if (typeof children === 'function') {\n      // Check if it's a function that accepts 2 parameters (data + utils)\n      try {\n        const result =\n          children.length > 1 ? (children as any)(data, renderProps) : (children as any)(data);\n        return result;\n      } catch {\n        // Fallback to simple call if inspection fails\n        return (children as any)(data);\n      }\n    }\n    return null;\n  }, [children, data, renderProps]);\n\n  return (\n    <Suspense fallback={LoadingComponent}>{error ? renderError(error) : renderChildren()}</Suspense>\n  );\n}\n\nDataLoader.displayName = 'DataLoader';\n\n/**\n * Hook version of DataLoader for use outside of JSX.\n */\nexport function useDataLoader<T = unknown>(\n  url: string,\n  options?: Omit<DataLoaderProps<T>, 'children' | 'LoadingComponent' | 'ErrorComponent'>,\n): ReturnType<typeof useSuspenseQuery<T, Error, T, QueryKey>>;\n\nexport function useDataLoader<S extends Schema.Schema<any, any, never>>(\n  url: string,\n  options: Omit<DataLoaderPropsWithSchema<S>, 'children' | 'LoadingComponent' | 'ErrorComponent'>,\n): ReturnType<\n  typeof useSuspenseQuery<Schema.Schema.Type<S>, Error, Schema.Schema.Type<S>, QueryKey>\n>;\n\nexport function useDataLoader(url: string, options: any = {}) {\n  const {\n    queryOptions = {},\n    options: fetcherOptions = {},\n    params = {},\n    queryKey,\n    onSuccess,\n    onError,\n    transform,\n    staleTime = 1_000 * 60 * 5,\n    refetchInterval = 1_000 * 60 * 5,\n    refetchOnWindowFocus = false,\n    refetchOnReconnect = true,\n    schema,\n  } = options;\n\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = fetcherOptions?.headers;\n    const timeout = fetcherOptions?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, fetcherOptions, schema]);\n\n  const enhancedFetcherOptions = useMemo(() => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: (err) => {\n        if (err instanceof ValidationError) {\n          logger.error(`[useDataLoader]: Validation failed - ${err.getProblemsString()}`);\n        }\n\n        if (typeof onError === 'function' && err instanceof Error) {\n          onError(err);\n        }\n      },\n      ...(fetcherOptions || null),\n    };\n\n    if (schema) {\n      return { ...baseOptions, schema };\n    }\n\n    return baseOptions;\n  }, [fetcherOptions, onError, schema]);\n\n  const queryFn = useCallback(async () => {\n    // Wrap the Effect execution in the request queue for automatic deduplication\n    const result = await requestQueue.enqueue(\n      url,\n      'GET',\n      async () => {\n        const effect = pipe(\n          get(url, enhancedFetcherOptions, params as QueryParams),\n          Effect.provide(FetchHttpClient.layer),\n        );\n        return await Effect.runPromise(effect);\n      },\n      {\n        headers: enhancedFetcherOptions?.headers,\n        bypassDeduplication: false,\n      },\n    );\n\n    const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n    if (typeof onSuccess === 'function') {\n      onSuccess(finalResult);\n    }\n\n    return finalResult;\n  }, [url, enhancedFetcherOptions, params, transform, onSuccess]);\n\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey as QueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        if (\n          error instanceof ValidationError ||\n          (error instanceof FetcherError &&\n            error.status &&\n            error.status >= 400 &&\n            error.status < 500)\n        ) {\n          return false;\n        }\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions,\n    };\n\n    return baseOptions;\n  }, [\n    finalQueryKey,\n    queryFn,\n    staleTime,\n    refetchInterval,\n    refetchOnWindowFocus,\n    refetchOnReconnect,\n    queryOptions,\n  ]);\n\n  return useSuspenseQuery(queryOptionsWithDefaults);\n}\n\nexport default DataLoader;\n"
        ],
        "mappings": "AAAA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SACEA,OAAO,EACPC,YAAY,EACZ,KAAKC,cAAc,EACnBC,GAAG,EACHC,MAAM,EACNC,qBAAqB,EACrB,KAAKC,WAAW,EAChBC,YAAY,EACZC,eAAe,QACV,SAAS;AAChB,SAASC,eAAe,QAAQ,kBAAkB;AAClD,cAAcC,QAAQ,QAAQ,uBAAuB;AACrD,SACEC,cAAc,EACdC,gBAAgB,EAChB,KAAKC,uBAAuB,QACvB,uBAAuB;AAC9B,SAASC,MAAM,EAAEC,IAAI,EAAEC,MAAM,QAAQ,QAAQ;AAC7C,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AAC7D,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAOC,MAAM,MAAM,UAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,UAAUC,qBAAqB,CAAC,CAAC,CAAC,CAAC;EACxC;EACAC,OAAO,EAAE,GAAG,GAAGC,OAAO,CAAC,IAAI,CAAC;EAC5B;EACAC,YAAY,EAAE,OAAO;EACrB;EACAC,WAAW,EAAEC,UAAU,CAAC,OAAOjB,cAAc,CAAC;EAC9C;EACAkB,UAAU,EAAE,GAAG,GAAGJ,OAAO,CAAC,IAAI,CAAC;EAC/B;EACAK,YAAY,EAAE,CAACC,IAAI,EAAEC,CAAC,GAAG,CAAC,CAACC,IAAI,EAAED,CAAC,EAAE,GAAGA,CAAC,CAAC,EAAE,GAAG,IAAI;AACpD;;AAEA;AACA;AACA;AACA,OAAO,UAAUE,mBAAmB,CAAC,CAAC,CAAC,CAAC;EACtC;EACA,CAACC,GAAG,EAAE,MAAM,CAAC,EAAE,OAAO;EACtB;EACAC,GAAG,EAAE,MAAM;EACX;EACAC,YAAY,CAAC,EAAEC,OAAO,CAACzB,uBAAuB,CAACmB,CAAC,EAAEO,KAAK,EAAEP,CAAC,EAAEtB,QAAQ,CAAC,CAAC;EACtE;EACA8B,gBAAgB,CAAC,EAAEvB,KAAK,CAACwB,SAAS;EAClC;EACAC,cAAc,CAAC,EAAEzB,KAAK,CAAC0B,aAAa,CAAC;IAAEC,KAAK,EAAEL,KAAK;IAAEM,KAAK,EAAE,GAAG,GAAG,IAAI;EAAC,CAAC,CAAC,GAAG5B,KAAK,CAAC6B,YAAY;EAC9F;EACAC,OAAO,CAAC,EAAE7C,cAAc,CAAC8B,CAAC,CAAC;EAC3B;EACAgB,MAAM,CAAC,EAAE1C,WAAW;EACpB;EACA2C,QAAQ,CAAC,EAAEvC,QAAQ;EACnB;EACAwC,SAAS,CAAC,EAAE,CAACnB,IAAI,EAAEC,CAAC,EAAE,GAAG,IAAI;EAC7B;EACAmB,OAAO,CAAC,EAAE,CAACP,KAAK,EAAEL,KAAK,EAAE,GAAG,IAAI;EAChC;EACAa,SAAS,CAAC,EAAE,CAACrB,IAAI,EAAE,GAAG,EAAE,GAAGC,CAAC;EAC5B;EACAqB,SAAS,CAAC,EAAE,MAAM;EAClB;EACAC,eAAe,CAAC,EAAE,MAAM,GAAG,KAAK;EAChC;EACAC,oBAAoB,CAAC,EAAE,OAAO;EAC9B;EACAC,kBAAkB,CAAC,EAAE,OAAO;AAC9B;;AAEA;AACA;AACA;AACA,OAAO,UAAUC,eAAe,CAAC,CAAC,CAAC,SAASvB,mBAAmB,CAACF,CAAC,CAAC,CAAC;EACjE;AACF;AACA;EACE0B,QAAQ,EACJ,CAAC,CAAC3B,IAAI,EAAEC,CAAC,EAAE,GAAGf,KAAK,CAACwB,SAAS,CAAC,GAC9B,CAAC,CAACV,IAAI,EAAEC,CAAC,EAAE2B,KAAK,EAAEpC,qBAAqB,CAACS,CAAC,CAAC,EAAE,GAAGf,KAAK,CAACwB,SAAS,CAAC;EACnE;EACAmB,MAAM,CAAC,EAAE,KAAK;AAChB;;AAEA;AACA;AACA;AACA,OAAO,UAAUC,yBAAyB,CAAC,UAAU7C,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,SAC1EkB,mBAAmB,CAAClB,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC;EACnD;AACF;AACA;EACEL,QAAQ,EACJ,CAAC,CAAC3B,IAAI,EAAEf,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAAE,GAAG9C,KAAK,CAACwB,SAAS,CAAC,GAClD,CAAC,CACCV,IAAI,EAAEf,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAC3BJ,KAAK,EAAEpC,qBAAqB,CAACP,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,CAAC,EACnD,GAAG9C,KAAK,CAACwB,SAAS,CAAC;EACzB;EACAmB,MAAM,EAAEG,CAAC;EACT;EACAhB,OAAO,CAAC,EAAE7C,cAAc,CAACc,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,CAAC,GAAG;IAAEH,MAAM,EAAEG,CAAC;EAAC,CAAC;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAU,CAAC,IAAI,OAAO,CAACA,CAACC,KAAK,EAAER,eAAe,CAACzB,CAAC,CAAC,CAAC,EAAEf,KAAK,CAAC6B,YAAY;AACtF,OAAO,SAASkB,UAAU,CAAC,UAAUhD,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAACgD,CAClEC,KAAK,EAAEJ,yBAAyB,CAACE,CAAC,CAAC,CACpC,EAAE9C,KAAK,CAAC6B,YAAY;AACrB,OAAO,SAASkB,UAAU,CAAC,IAAI,OAAO,EAAE,UAAUhD,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,GAAG,GAAG,CAACgD,CAAC;EACtFN,QAAQ;EACRtB,GAAG;EACHC,YAAY,GAAG,CAAC,CAAC;EACjBG,gBAAgB,GAAG,CAAC,MAAM,GAAG;EAC7BE,cAAc,GAAGrB,WAAW;EAC5B0B,OAAO,GAAG,CAAC,CAAC;EACZC,MAAM,GAAG,CAAC,CAAC;EACXC,QAAQ;EACRC,SAAS;EACTC,OAAO;EACPC,SAAS;EACTC,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;EAAE;EAC5BC,eAAe,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;EAAE;EAClCC,oBAAoB,GAAG,KAAK;EAC5BC,kBAAkB,GAAG,IAAI;EACzBI;AAGF,CAFC,EAAE,CAACH,eAAe,CAACzB,CAAC,CAAC,GAAG6B,yBAAyB,CAACE,CAAC,CAAC,CAAC,GAAG;EACvDH,MAAM,CAAC,EAAEG,CAAC;AACZ,CAAC,CAAC,EAAE9C,KAAK,CAAC6B,YAAY,CAAC;EACrB,MAAMnB,WAAW,GAAGhB,cAAc,CAAC,CAAC;;EAEpC;EACA,MAAMuD,aAAa,GAAG9C,OAAO,CAAC,MAAM;IAClC,IAAI6B,QAAQ,EAAE,OAAOA,QAAQ;IAC7B,MAAMkB,OAAO,GAAGpB,OAAO,EAAEoB,OAAO;IAChC,MAAMC,OAAO,GAAGrB,OAAO,EAAEqB,OAAO;IAChC,MAAMC,SAAS,GAAGT,MAAM,GAAG,UAAU5C,MAAM,CAACsD,MAAM,CAACV,MAAM,CAAC,EAAE,GAAG,IAAI;IACnE,MAAMW,QAAQ,GAAG,CAAC,YAAY,EAAEnC,GAAG,EAAEY,MAAM,EAAEmB,OAAO,EAAEC,OAAO,EAAEC,SAAS,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC;IACzF,OAAOF,QAAQ;EACjB,CAAC,EAAE,CAACtB,QAAQ,EAAEb,GAAG,EAAEY,MAAM,EAAED,OAAO,EAAEa,MAAM,CAAC,CAAC;;EAE5C;EACA,MAAMc,cAAc,GAAGtD,OAAO,CAAC,EAAE,EAAElB,cAAc,CAAC,GAAG,CAAC,IAAI;IACxD,MAAMyE,WAAW,EAAEzE,cAAc,CAAC,GAAG,CAAC,GAAG;MACvC0E,OAAO,EAAE,CAAC;MACVC,UAAU,EAAE,KAAK;MACjBT,OAAO,EAAE,MAAM;MACfjB,OAAO,EAAG2B,GAAG,IAAK;QAChB,MAAMC,IAAI,GAAG1E,qBAAqB,CAAC+B,GAAG,EAAEpC,OAAO,CAAC;QAChDI,MAAM,CAAC4E,IAAI,CAAC,iBAAiBD,IAAI,EAAE,CAAC;QAEpC,IAAID,GAAG,YAAY7E,YAAY,EAAE;UAC/BG,MAAM,CAACwC,KAAK,CAAC,wBAAwBkC,GAAG,CAACG,MAAM,EAAE,EAAEH,GAAG,CAACI,YAAY,CAAC;QACtE,CAAC,MAAM,IAAIJ,GAAG,YAAYtE,eAAe,EAAE;UACzCJ,MAAM,CAACwC,KAAK,CAAC,qCAAqCkC,GAAG,CAACK,iBAAiB,CAAC,CAAC,EAAE,CAAC;UAC5E/E,MAAM,CAACwC,KAAK,CAAC,6BAA6B,EAAEkC,GAAG,CAACI,YAAY,CAAC;QAC/D,CAAC,MAAM;UACL9E,MAAM,CAACwC,KAAK,CAAC,gCAAgC,EAAEkC,GAAG,CAAC;QACrD;;QAEA;QACA,IAAI3B,OAAO,IAAI2B,GAAG,YAAYvC,KAAK,EAAEY,OAAO,CAAC2B,GAAG,CAAC;MACnD,CAAC;MACD,IAAI/B,OAAO,IAAI,IAAI;IACrB,CAAC;IAED,IAAIa,MAAM,EAAE,OAAO;MAAE,GAAGe,WAAW;MAAEf;IAAO,CAAC;IAE7C,OAAOe,WAAW;EACpB,CAAC,EAAE,CAACvC,GAAG,EAAEW,OAAO,EAAEI,OAAO,EAAES,MAAM,CAAC,CAAC;;EAEnC;EACA,MAAMwB,OAAO,GAAGjE,WAAW,CAAC,YAAY;IACtC,IAAI;MACF;MACA,MAAMkE,MAAM,GAAG,MAAM9E,YAAY,CAAC+E,OAAO,CACvClD,GAAG,EACH,KAAK,EACL,YAAY;QACV,MAAMmD,MAAM,GAAGxE,IAAI,CACjBZ,GAAG,CAACiC,GAAG,EAAEsC,cAAc,EAAE1B,MAAM,CAAC,EAChClC,MAAM,CAAC0E,OAAO,CAAC/E,eAAe,CAACgF,KAAK,CACtC,CAAC;QACD,OAAO,MAAM3E,MAAM,CAAC4E,UAAU,CAACH,MAAM,CAAC;MACxC,CAAC,EACD;QACEpB,OAAO,EAAEO,cAAc,EAAEP,OAAO;QAChCwB,mBAAmB,EAAE;MACvB,CACF,CAAC;;MAED;MACA,MAAMC,WAAW,GAAGxC,SAAS,IAAI,OAAOA,SAAS,KAAK,UAAU,GAAGA,SAAS,CAACiC,MAAM,CAAC,GAAGA,MAAM;;MAE7F;MACA,IAAInC,SAAS,EAAEA,SAAS,CAAC0C,WAAW,CAAC;MAErC,OAAOA,WAAW;IACpB,CAAC,CAAC,OAAOhD,KAAK,EAAE;MACd;MACA,IAAIA,KAAK,YAAYpC,eAAe,EAAE,MAAMoC,KAAK;MAEjD,IAAIA,KAAK,YAAY3C,YAAY,EAAE,MAAM2C,KAAK;;MAE9C;MACA,MAAM,IAAI3C,YAAY,CACpB2C,KAAK,YAAYL,KAAK,GAAGK,KAAK,CAACiD,OAAO,GAAG,wBAAwB,EACjEzD,GAAG,EACH0D,SAAS,EACTlD,KACF,CAAC;IACH;EACF,CAAC,EAAE,CAACR,GAAG,EAAEsC,cAAc,EAAE1B,MAAM,EAAEI,SAAS,EAAEF,SAAS,CAAC,CAAC;;EAEvD;EACA,MAAM6C,wBAAwB,GAAG3E,OAAO,CAAC,MAAM;IAC7C,MAAMuD,WAAW,EAAE9D,uBAAuB,CAAC,GAAG,EAAE0B,KAAK,EAAE,GAAG,EAAE7B,QAAQ,CAAC,GAAG;MACtEuC,QAAQ,EAAEiB,aAAa;MACvBkB,OAAO;MACP/B,SAAS;MACTC,eAAe;MACfC,oBAAoB;MACpBC,kBAAkB;MAClBX,KAAK,EAAEA,CAACmD,YAAY,EAAE,MAAM,EAAEpD,KAAK,EAAE,OAAO,KAAK;QAC/C;QACA,IACEA,KAAK,YAAYpC,eAAe,IAC/BoC,KAAK,YAAY3C,YAAY,IAC5B2C,KAAK,CAACqC,MAAM,IACZrC,KAAK,CAACqC,MAAM,IAAI,GAAG,IACnBrC,KAAK,CAACqC,MAAM,GAAG,GAAI,EAErB,OAAO,KAAK;QAEd,OAAOe,YAAY,GAAG,CAAC;MACzB,CAAC;MACDnB,UAAU,EAAEA,CAACoB,YAAY,EAAE,MAAM,KAAKC,IAAI,CAACC,GAAG,CAAC,KAAK,GAAG,CAAC,IAAIF,YAAY,EAAE,MAAM,CAAC;MACjF,GAAG5D;IACL,CAAC;IAED,OAAOsC,WAAW;EACpB,CAAC,EAAE,CACDT,aAAa,EACbkB,OAAO,EACP/B,SAAS,EACTC,eAAe,EACfC,oBAAoB,EACpBC,kBAAkB,EAClBnB,YAAY,CACb,CAAC;EAEF,MAAM;IAAEN,IAAI;IAAEa,KAAK;IAAEpB,OAAO;IAAEE;EAAa,CAAC,GAAGd,gBAAgB,CAACmF,wBAAwB,CAAC;;EAEzF;EACA,MAAMK,WAAW,GAAGhF,OAAO,CAAC,MAAM;IAChC,MAAM6C,KAAK,EAAE1C,qBAAqB,CAAC,GAAG,CAAC,GAAG;MACxCC,OAAO,EAAE,MAAAA,CAAA,KAAY;QACnB,MAAMA,OAAO,CAAC,CAAC;MACjB,CAAC;MACDE,YAAY;MACZC,WAAW;MACXE,UAAU,EAAE,MAAAA,CAAA,KAAY;QACtB,MAAMF,WAAW,CAAC0E,iBAAiB,CAAC;UAAEpD,QAAQ,EAAEiB;QAAc,CAAC,CAAC;MAClE,CAAC;MACDpC,YAAY,EAAEA,CAACwE,OAAO,EAAE,GAAG,KAAK;QAC9B3E,WAAW,CAACG,YAAY,CAACoC,aAAa,EAAEoC,OAAO,CAAC;MAClD;IACF,CAAC;IACD,OAAOrC,KAAK;EACd,CAAC,EAAE,CAACzC,OAAO,EAAEE,YAAY,EAAEC,WAAW,EAAEuC,aAAa,CAAC,CAAC;;EAEvD;EACA,MAAMqC,WAAW,GAAGpF,WAAW,CAC7B,CAACyB,KAAK,EAAEL,KAAK,KAAK;IAChB,IAAItB,KAAK,CAACuF,cAAc,CAAC9D,cAAc,CAAC,EAAE;MACxC,OAAOzB,KAAK,CAACwF,YAAY,CAAC/D,cAAc,IAAIzB,KAAK,CAAC6B,YAAY,CAAC,GAAG,CAAC,EAAE;QACnEF,KAAK;QACLC,KAAK,EAAEA,CAAA,KAAMrB,OAAO,CAAC;MACvB,CAAC,CAAC;IACJ;IAEA,MAAMkF,SAAS,GAAGhE,cAAc,IAAIzB,KAAK,CAAC0B,aAAa,CAAC;MACtDC,KAAK,EAAEL,KAAK;MACZM,KAAK,EAAE,GAAG,GAAG,IAAI;IACnB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAACD,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,MAAMpB,OAAO,CAAC,CAAC,CAAC,GAAG;EAC5D,CAAC,EACD,CAACkB,cAAc,EAAElB,OAAO,CAC1B,CAAC;;EAED;EACA,MAAMmF,cAAc,GAAGxF,WAAW,CAAC,MAAM;IACvC,IAAI,OAAOuC,QAAQ,KAAK,UAAU,EAAE;MAClC;MACA,IAAI;QACF,MAAM2B,MAAM,GACV3B,QAAQ,CAACkD,MAAM,GAAG,CAAC,GAAG,CAAClD,QAAQ,IAAI,GAAG,EAAE3B,IAAI,EAAEqE,WAAW,CAAC,GAAG,CAAC1C,QAAQ,IAAI,GAAG,EAAE3B,IAAI,CAAC;QACtF,OAAOsD,MAAM;MACf,CAAC,CAAC,MAAM;QACN;QACA,OAAO,CAAC3B,QAAQ,IAAI,GAAG,EAAE3B,IAAI,CAAC;MAChC;IACF;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAAC2B,QAAQ,EAAE3B,IAAI,EAAEqE,WAAW,CAAC,CAAC;EAEjC,OACE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC5D,gBAAgB,CAAC,6GAAC,CAACI,KAAK,GAAG2D,WAAW,CAAC3D,KAAK,CAAC,GAAG+D,cAAc,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;AAEpG;AAEA3C,UAAU,CAAC6C,WAAW,GAAG,YAAY;;AAErC;AACA;AACA;AACA,OAAO,SAASC,aAAa,CAAC,IAAI,OAAO,CAACA,CACxC1E,GAAG,EAAE,MAAM,EACXW,OAAsF,CAA9E,EAAEgE,IAAI,CAACtD,eAAe,CAACzB,CAAC,CAAC,EAAE,UAAU,GAAG,kBAAkB,GAAG,gBAAgB,CAAC,CACvF,EAAEJ,UAAU,CAAC,OAAOhB,gBAAgB,CAACoB,CAAC,EAAEO,KAAK,EAAEP,CAAC,EAAEtB,QAAQ,CAAC,CAAC;AAE7D,OAAO,SAASoG,aAAa,CAAC,UAAU9F,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC8F,CACrE1E,GAAG,EAAE,MAAM,EACXW,OAAO,EAAEgE,IAAI,CAAClD,yBAAyB,CAACE,CAAC,CAAC,EAAE,UAAU,GAAG,kBAAkB,GAAG,gBAAgB,CAAC,CAChG,EAAEnC,UAAU,CACX,OAAOhB,gBAAgB,CAACI,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAAExB,KAAK,EAAEvB,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAAErD,QAAQ,CAAC,CACvF;AAED,OAAO,SAASoG,aAAaA,CAAC1E,GAAG,EAAE,MAAM,EAAEW,OAAO,EAAE,GAAG,GAAG,CAAC,CAAC,EAAE;EAC5D,MAAM;IACJV,YAAY,GAAG,CAAC,CAAC;IACjBU,OAAO,EAAE2B,cAAc,GAAG,CAAC,CAAC;IAC5B1B,MAAM,GAAG,CAAC,CAAC;IACXC,QAAQ;IACRC,SAAS;IACTC,OAAO;IACPC,SAAS;IACTC,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;IAC1BC,eAAe,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;IAChCC,oBAAoB,GAAG,KAAK;IAC5BC,kBAAkB,GAAG,IAAI;IACzBI;EACF,CAAC,GAAGb,OAAO;EAEX,MAAMmB,aAAa,GAAG9C,OAAO,CAAC,MAAM;IAClC,IAAI6B,QAAQ,EAAE,OAAOA,QAAQ;IAC7B,MAAMkB,OAAO,GAAGO,cAAc,EAAEP,OAAO;IACvC,MAAMC,OAAO,GAAGM,cAAc,EAAEN,OAAO;IACvC,MAAMC,SAAS,GAAGT,MAAM,GAAG,UAAU5C,MAAM,CAACsD,MAAM,CAACV,MAAM,CAAC,EAAE,GAAG,IAAI;IACnE,MAAMW,QAAQ,GAAG,CAAC,YAAY,EAAEnC,GAAG,EAAEY,MAAM,EAAEmB,OAAO,EAAEC,OAAO,EAAEC,SAAS,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC;IACzF,OAAOF,QAAQ;EACjB,CAAC,EAAE,CAACtB,QAAQ,EAAEb,GAAG,EAAEY,MAAM,EAAE0B,cAAc,EAAEd,MAAM,CAAC,CAAC;EAEnD,MAAMoD,sBAAsB,GAAG5F,OAAO,CAAC,MAAM;IAC3C,MAAMuD,WAAW,EAAEzE,cAAc,CAAC,GAAG,CAAC,GAAG;MACvC0E,OAAO,EAAE,CAAC;MACVC,UAAU,EAAE,KAAK;MACjBT,OAAO,EAAE,MAAM;MACfjB,OAAO,EAAG2B,GAAG,IAAK;QAChB,IAAIA,GAAG,YAAYtE,eAAe,EAAE;UAClCJ,MAAM,CAACwC,KAAK,CAAC,wCAAwCkC,GAAG,CAACK,iBAAiB,CAAC,CAAC,EAAE,CAAC;QACjF;QAEA,IAAI,OAAOhC,OAAO,KAAK,UAAU,IAAI2B,GAAG,YAAYvC,KAAK,EAAE;UACzDY,OAAO,CAAC2B,GAAG,CAAC;QACd;MACF,CAAC;MACD,IAAIJ,cAAc,IAAI,IAAI;IAC5B,CAAC;IAED,IAAId,MAAM,EAAE;MACV,OAAO;QAAE,GAAGe,WAAW;QAAEf;MAAO,CAAC;IACnC;IAEA,OAAOe,WAAW;EACpB,CAAC,EAAE,CAACD,cAAc,EAAEvB,OAAO,EAAES,MAAM,CAAC,CAAC;EAErC,MAAMwB,OAAO,GAAGjE,WAAW,CAAC,YAAY;IACtC;IACA,MAAMkE,MAAM,GAAG,MAAM9E,YAAY,CAAC+E,OAAO,CACvClD,GAAG,EACH,KAAK,EACL,YAAY;MACV,MAAMmD,MAAM,GAAGxE,IAAI,CACjBZ,GAAG,CAACiC,GAAG,EAAE4E,sBAAsB,EAAEhE,MAAM,IAAI1C,WAAW,CAAC,EACvDQ,MAAM,CAAC0E,OAAO,CAAC/E,eAAe,CAACgF,KAAK,CACtC,CAAC;MACD,OAAO,MAAM3E,MAAM,CAAC4E,UAAU,CAACH,MAAM,CAAC;IACxC,CAAC,EACD;MACEpB,OAAO,EAAE6C,sBAAsB,EAAE7C,OAAO;MACxCwB,mBAAmB,EAAE;IACvB,CACF,CAAC;IAED,MAAMC,WAAW,GAAGxC,SAAS,IAAI,OAAOA,SAAS,KAAK,UAAU,GAAGA,SAAS,CAACiC,MAAM,CAAC,GAAGA,MAAM;IAE7F,IAAI,OAAOnC,SAAS,KAAK,UAAU,EAAE;MACnCA,SAAS,CAAC0C,WAAW,CAAC;IACxB;IAEA,OAAOA,WAAW;EACpB,CAAC,EAAE,CAACxD,GAAG,EAAE4E,sBAAsB,EAAEhE,MAAM,EAAEI,SAAS,EAAEF,SAAS,CAAC,CAAC;EAE/D,MAAM6C,wBAAwB,GAAG3E,OAAO,CAAC,MAAM;IAC7C,MAAMuD,WAAW,EAAE9D,uBAAuB,CAAC,GAAG,EAAE0B,KAAK,EAAE,GAAG,EAAE7B,QAAQ,CAAC,GAAG;MACtEuC,QAAQ,EAAEiB,aAAa,IAAIxD,QAAQ;MACnC0E,OAAO;MACP/B,SAAS;MACTC,eAAe;MACfC,oBAAoB;MACpBC,kBAAkB;MAClBX,KAAK,EAAEA,CAACmD,YAAY,EAAE,MAAM,EAAEpD,KAAK,EAAE,OAAO,KAAK;QAC/C,IACEA,KAAK,YAAYpC,eAAe,IAC/BoC,KAAK,YAAY3C,YAAY,IAC5B2C,KAAK,CAACqC,MAAM,IACZrC,KAAK,CAACqC,MAAM,IAAI,GAAG,IACnBrC,KAAK,CAACqC,MAAM,GAAG,GAAI,EACrB;UACA,OAAO,KAAK;QACd;QACA,OAAOe,YAAY,GAAG,CAAC;MACzB,CAAC;MACDnB,UAAU,EAAEA,CAACoB,YAAY,EAAE,MAAM,KAAKC,IAAI,CAACC,GAAG,CAAC,KAAK,GAAG,CAAC,IAAIF,YAAY,EAAE,MAAM,CAAC;MACjF,GAAG5D;IACL,CAAC;IAED,OAAOsC,WAAW;EACpB,CAAC,EAAE,CACDT,aAAa,EACbkB,OAAO,EACP/B,SAAS,EACTC,eAAe,EACfC,oBAAoB,EACpBC,kBAAkB,EAClBnB,YAAY,CACb,CAAC;EAEF,OAAOzB,gBAAgB,CAACmF,wBAAwB,CAAC;AACnD;AAEA,eAAe/B,UAAU",
        "ignoreList": []
      }
    },
    {
      "name": "sentry-vite-component-name-annotate-plugin",
      "result": "'use client';\n\n/**\n * Copyright 2025 Mike Odnis\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { fetcher, FetcherError, type FetcherOptions, get, logger, parseCodePathDetailed, type QueryParams, requestQueue, ValidationError } from '@/utils';\nimport { FetchHttpClient } from '@effect/platform';\nimport type { QueryKey } from '@tanstack/react-query';\nimport { useQueryClient, useSuspenseQuery, type UseSuspenseQueryOptions } from '@tanstack/react-query';\nimport { Effect, pipe, Schema } from 'effect';\nimport React, { Suspense, useCallback, useMemo } from 'react';\nimport ClientError from './client-error';\nimport Loader from './loader';\n/**\n * @module effect-data-loader\n *\n * Enhanced DataLoader for React using React Query, Effect, and Effect Schema validation.\n *\n * This module provides a generic, type-safe React component and hook for loading data asynchronously\n * with advanced error handling, runtime validation, caching, and developer experience. It is designed\n * to work with Effect, Effect Schema, and React Query, supporting features like retries, timeouts,\n * schema validation, optimistic updates, and more.\n *\n * ## Features\n * - Type-safe data loading for React components with Effect Schema validation\n * - Suspense support\n * - Runtime type validation with detailed error messages\n * - Customizable error and loading components\n * - Query caching and invalidation\n * - Optimistic updates\n * - Retry and timeout logic\n * - Render props and hook API\n * @see DataLoader\n * @see useDataLoader\n * @example\n * ```tsx\n * import { DataLoader } from './effect-data-loader';\n * import { Schema } from 'effect';\n *\n * const UserSchema = Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * });\n *\n * function UserList() {\n *   return (\n *     <DataLoader url=\"/api/users\" schema={UserSchema}>\n *       {(users) => (\n *         <ul>{users.map(u => <li key={u.id}>{u.name}</li>)}</ul>\n *       )}\n *     </DataLoader>\n *   );\n * }\n * ```\n */\n/**\n * Enhanced render props with additional query state and actions.\n *\n * @template T The type of the loaded data.\n */\nexport interface DataLoaderRenderProps<T> {\n  /** Manually trigger a refetch */\n  refetch: () => Promise<void>;\n  /** Whether the query is currently refetching */\n  isRefetching: boolean;\n  /** Query client for advanced operations */\n  queryClient: ReturnType<typeof useQueryClient>;\n  /** Invalidate this query's cache */\n  invalidate: () => Promise<void>;\n  /** Set query data optimistically */\n  setQueryData: (data: T | ((prev: T) => T)) => void;\n}\n\n/**\n * Base props for DataLoader without schema.\n */\nexport interface BaseDataLoaderProps<T> {\n  /** Additional props */\n  [key: string]: unknown;\n  /** URL to fetch data from */\n  url: string;\n  /** Additional React Query options */\n  queryOptions?: Partial<UseSuspenseQueryOptions<T, Error, T, QueryKey>>;\n  /** Custom loading component */\n  LoadingComponent?: React.ReactNode;\n  /** Custom error component */\n  ErrorComponent?: React.ComponentType<{\n    error: Error;\n    retry: () => void;\n  }> | React.ReactElement;\n  /** Fetcher options (retries, timeout, etc.) */\n  options?: FetcherOptions<T>;\n  /** Query parameters */\n  params?: QueryParams;\n  /** Custom query key override */\n  queryKey?: QueryKey;\n  /** Callback fired when data is successfully loaded */\n  onSuccess?: (data: T) => void;\n  /** Callback fired when an error occurs */\n  onError?: (error: Error) => void;\n  /** Transform the data before passing to children */\n  transform?: (data: any) => T;\n  /** Stale time in milliseconds (default: 5 minutes) */\n  staleTime?: number;\n  /** Refetch interval in milliseconds or false to disable (default: 5 minutes) */\n  refetchInterval?: number | false;\n  /** Whether to refetch on window focus (default: false) */\n  refetchOnWindowFocus?: boolean;\n  /** Whether to refetch on reconnect (default: true) */\n  refetchOnReconnect?: boolean;\n}\n\n/**\n * Props for DataLoader without schema (manual typing).\n */\nexport interface DataLoaderProps<T> extends BaseDataLoaderProps<T> {\n  /**\n   * Render prop that receives data and optional utilities.\n   */\n  children: ((data: T) => React.ReactNode) | ((data: T, utils: DataLoaderRenderProps<T>) => React.ReactNode);\n  /** Effect Schema for runtime validation (optional) */\n  schema?: never;\n}\n\n/**\n * Props for DataLoader with Effect Schema (automatic type inference).\n */\nexport interface DataLoaderPropsWithSchema<S extends Schema.Schema<any, any, never>> extends BaseDataLoaderProps<Schema.Schema.Type<S>> {\n  /**\n   * Render prop that receives validated data and optional utilities.\n   */\n  children: ((data: Schema.Schema.Type<S>) => React.ReactNode) | ((data: Schema.Schema.Type<S>, utils: DataLoaderRenderProps<Schema.Schema.Type<S>>) => React.ReactNode);\n  /** Effect Schema for runtime validation */\n  schema: S;\n  /** Fetcher options with schema */\n  options?: FetcherOptions<Schema.Schema.Type<S>> & {\n    schema: S;\n  };\n}\n\n/**\n * Enhanced DataLoader component with Effect Schema validation, better error handling, caching, and developer experience.\n *\n * @example Without schema\n * ```tsx\n * <DataLoader<User[]> url=\"/api/users\">\n *   {(users) => <UserList users={users} />}\n * </DataLoader>\n * ```\n *\n * @example With schema (automatic type inference)\n * ```tsx\n * const UsersSchema = Schema.Array(Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * }));\n *\n * <DataLoader url=\"/api/users\" schema={UsersSchema}>\n *   {(users) => <UserList users={users} />} // users is fully typed!\n * </DataLoader>\n * ```\n */\nexport function DataLoader<T = unknown>(props: DataLoaderProps<T>): React.ReactElement;\nexport function DataLoader<S extends Schema.Schema<any, any, never>>(props: DataLoaderPropsWithSchema<S>): React.ReactElement;\nexport function DataLoader<T = unknown, S extends Schema.Schema<any, any, never> = any>({\n  children,\n  url,\n  queryOptions = {},\n  LoadingComponent = <Loader />,\n  ErrorComponent = ClientError,\n  options = {},\n  params = {},\n  queryKey,\n  onSuccess,\n  onError,\n  transform,\n  staleTime = 1_000 * 60 * 5,\n  // 5 minutes\n  refetchInterval = 1_000 * 60 * 5,\n  // 5 minutes\n  refetchOnWindowFocus = false,\n  refetchOnReconnect = true,\n  schema\n}: (DataLoaderProps<T> | DataLoaderPropsWithSchema<S>) & {\n  schema?: S;\n}): React.ReactElement {\n  const queryClient = useQueryClient();\n\n  // Generate stable query key including schema\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = options?.headers;\n    const timeout = options?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, options, schema]);\n\n  // Enhanced fetcher options with better defaults and schema support\n  const fetcherOptions = useMemo((): FetcherOptions<any> => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: err => {\n        const path = parseCodePathDetailed(url, fetcher);\n        logger.info(`[DataLoader]: ${path}`);\n        if (err instanceof FetcherError) {\n          logger.error(`[DataLoader]: Status ${err.status}`, err.responseData);\n        } else if (err instanceof ValidationError) {\n          logger.error(`[DataLoader]: Validation failed - ${err.getProblemsString()}`);\n          logger.error('[DataLoader]: Invalid data:', err.responseData);\n        } else {\n          logger.error('[DataLoader]: Unexpected error', err);\n        }\n\n        // Call user-provided error handler\n        if (onError && err instanceof Error) onError(err);\n      },\n      ...(options || null)\n    };\n    if (schema) return {\n      ...baseOptions,\n      schema\n    };\n    return baseOptions;\n  }, [url, options, onError, schema]);\n\n  // Memoized query function with schema support and request deduplication\n  const queryFn = useCallback(async () => {\n    try {\n      // Wrap the Effect execution in the request queue for automatic deduplication\n      const result = await requestQueue.enqueue(url, 'GET', async () => {\n        const effect = pipe(get(url, fetcherOptions, params), Effect.provide(FetchHttpClient.layer));\n        return await Effect.runPromise(effect);\n      }, {\n        headers: fetcherOptions?.headers,\n        bypassDeduplication: false\n      });\n\n      // Apply transformation if provided (note: schema validation happens first)\n      const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n      // Call success callback\n      if (onSuccess) onSuccess(finalResult);\n      return finalResult;\n    } catch (error) {\n      // Enhanced error handling for validation errors\n      if (error instanceof ValidationError) throw error;\n      if (error instanceof FetcherError) throw error;\n\n      // Wrap unexpected errors\n      throw new FetcherError(error instanceof Error ? error.message : 'Unknown error occurred', url, undefined, error);\n    }\n  }, [url, fetcherOptions, params, transform, onSuccess]);\n\n  // Enhanced query options\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        // Don't retry client errors (4xx)\n        if (error instanceof ValidationError || error instanceof FetcherError && error.status && error.status >= 400 && error.status < 500) return false;\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions\n    };\n    return baseOptions;\n  }, [finalQueryKey, queryFn, staleTime, refetchInterval, refetchOnWindowFocus, refetchOnReconnect, queryOptions]);\n  const {\n    data,\n    error,\n    refetch,\n    isRefetching\n  } = useSuspenseQuery(queryOptionsWithDefaults);\n\n  // Enhanced render props\n  const renderProps = useMemo(() => {\n    const props: DataLoaderRenderProps<any> = {\n      refetch: async () => {\n        await refetch();\n      },\n      isRefetching,\n      queryClient,\n      invalidate: async () => {\n        await queryClient.invalidateQueries({\n          queryKey: finalQueryKey\n        });\n      },\n      setQueryData: (newData: any) => {\n        queryClient.setQueryData(finalQueryKey, newData);\n      }\n    };\n    return props;\n  }, [refetch, isRefetching, queryClient, finalQueryKey]);\n\n  // Enhanced error component with retry capability and validation error support\n  const renderError = useCallback((error: Error) => {\n    if (React.isValidElement(ErrorComponent)) {\n      return React.cloneElement(ErrorComponent as React.ReactElement<any>, {\n        error,\n        retry: () => refetch()\n      });\n    }\n    const Component = ErrorComponent as React.ComponentType<{\n      error: Error;\n      retry: () => void;\n    }>;\n    return <Component error={error} retry={() => refetch()} />;\n  }, [ErrorComponent, refetch]);\n\n  // Determine how to call children function\n  const renderChildren = useCallback(() => {\n    if (typeof children === 'function') {\n      // Check if it's a function that accepts 2 parameters (data + utils)\n      try {\n        const result = children.length > 1 ? (children as any)(data, renderProps) : (children as any)(data);\n        return result;\n      } catch {\n        // Fallback to simple call if inspection fails\n        return (children as any)(data);\n      }\n    }\n    return null;\n  }, [children, data, renderProps]);\n  return <Suspense fallback={LoadingComponent} data-sentry-element=\"Suspense\" data-sentry-component=\"DataLoader\" data-sentry-source-file=\"data-loader.tsx\">{error ? renderError(error) : renderChildren()}</Suspense>;\n}\nDataLoader.displayName = 'DataLoader';\n\n/**\n * Hook version of DataLoader for use outside of JSX.\n */\nexport function useDataLoader<T = unknown>(url: string, options?: Omit<DataLoaderProps<T>, 'children' | 'LoadingComponent' | 'ErrorComponent'>): ReturnType<typeof useSuspenseQuery<T, Error, T, QueryKey>>;\nexport function useDataLoader<S extends Schema.Schema<any, any, never>>(url: string, options: Omit<DataLoaderPropsWithSchema<S>, 'children' | 'LoadingComponent' | 'ErrorComponent'>): ReturnType<typeof useSuspenseQuery<Schema.Schema.Type<S>, Error, Schema.Schema.Type<S>, QueryKey>>;\nexport function useDataLoader(url: string, options: any = {}) {\n  const {\n    queryOptions = {},\n    options: fetcherOptions = {},\n    params = {},\n    queryKey,\n    onSuccess,\n    onError,\n    transform,\n    staleTime = 1_000 * 60 * 5,\n    refetchInterval = 1_000 * 60 * 5,\n    refetchOnWindowFocus = false,\n    refetchOnReconnect = true,\n    schema\n  } = options;\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = fetcherOptions?.headers;\n    const timeout = fetcherOptions?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, fetcherOptions, schema]);\n  const enhancedFetcherOptions = useMemo(() => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: err => {\n        if (err instanceof ValidationError) {\n          logger.error(`[useDataLoader]: Validation failed - ${err.getProblemsString()}`);\n        }\n        if (typeof onError === 'function' && err instanceof Error) {\n          onError(err);\n        }\n      },\n      ...(fetcherOptions || null)\n    };\n    if (schema) {\n      return {\n        ...baseOptions,\n        schema\n      };\n    }\n    return baseOptions;\n  }, [fetcherOptions, onError, schema]);\n  const queryFn = useCallback(async () => {\n    // Wrap the Effect execution in the request queue for automatic deduplication\n    const result = await requestQueue.enqueue(url, 'GET', async () => {\n      const effect = pipe(get(url, enhancedFetcherOptions, params as QueryParams), Effect.provide(FetchHttpClient.layer));\n      return await Effect.runPromise(effect);\n    }, {\n      headers: enhancedFetcherOptions?.headers,\n      bypassDeduplication: false\n    });\n    const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n    if (typeof onSuccess === 'function') {\n      onSuccess(finalResult);\n    }\n    return finalResult;\n  }, [url, enhancedFetcherOptions, params, transform, onSuccess]);\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey as QueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        if (error instanceof ValidationError || error instanceof FetcherError && error.status && error.status >= 400 && error.status < 500) {\n          return false;\n        }\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions\n    };\n    return baseOptions;\n  }, [finalQueryKey, queryFn, staleTime, refetchInterval, refetchOnWindowFocus, refetchOnReconnect, queryOptions]);\n  return useSuspenseQuery(queryOptionsWithDefaults);\n}\nexport default DataLoader;",
      "start": 1768772628340,
      "end": 1768772628354,
      "order": "pre",
      "sourcemaps": {
        "version": 3,
        "names": [
          "fetcher",
          "FetcherError",
          "FetcherOptions",
          "get",
          "logger",
          "parseCodePathDetailed",
          "QueryParams",
          "requestQueue",
          "ValidationError",
          "FetchHttpClient",
          "QueryKey",
          "useQueryClient",
          "useSuspenseQuery",
          "UseSuspenseQueryOptions",
          "Effect",
          "pipe",
          "Schema",
          "React",
          "Suspense",
          "useCallback",
          "useMemo",
          "ClientError",
          "Loader",
          "DataLoaderRenderProps",
          "refetch",
          "Promise",
          "isRefetching",
          "queryClient",
          "ReturnType",
          "invalidate",
          "setQueryData",
          "data",
          "T",
          "prev",
          "BaseDataLoaderProps",
          "key",
          "url",
          "queryOptions",
          "Partial",
          "Error",
          "LoadingComponent",
          "ReactNode",
          "ErrorComponent",
          "ComponentType",
          "error",
          "retry",
          "ReactElement",
          "options",
          "params",
          "queryKey",
          "onSuccess",
          "onError",
          "transform",
          "staleTime",
          "refetchInterval",
          "refetchOnWindowFocus",
          "refetchOnReconnect",
          "DataLoaderProps",
          "children",
          "utils",
          "schema",
          "DataLoaderPropsWithSchema",
          "Type",
          "S",
          "DataLoader",
          "props",
          "finalQueryKey",
          "headers",
          "timeout",
          "schemaKey",
          "format",
          "keyArray",
          "filter",
          "Boolean",
          "fetcherOptions",
          "baseOptions",
          "retries",
          "retryDelay",
          "err",
          "path",
          "info",
          "status",
          "responseData",
          "getProblemsString",
          "queryFn",
          "result",
          "enqueue",
          "effect",
          "provide",
          "layer",
          "runPromise",
          "bypassDeduplication",
          "finalResult",
          "message",
          "undefined",
          "queryOptionsWithDefaults",
          "failureCount",
          "attemptIndex",
          "Math",
          "min",
          "renderProps",
          "invalidateQueries",
          "newData",
          "renderError",
          "isValidElement",
          "cloneElement",
          "Component",
          "renderChildren",
          "length",
          "displayName",
          "useDataLoader",
          "Omit",
          "enhancedFetcherOptions"
        ],
        "sources": [
          "/home/wombocombo/github/wrk/gdg-fsc-website/apps/frontend/src/components/data-loader.tsx"
        ],
        "sourcesContent": [
          "'use client';\n\n/**\n * Copyright 2025 Mike Odnis\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  fetcher,\n  FetcherError,\n  type FetcherOptions,\n  get,\n  logger,\n  parseCodePathDetailed,\n  type QueryParams,\n  requestQueue,\n  ValidationError,\n} from '@/utils';\nimport { FetchHttpClient } from '@effect/platform';\nimport type { QueryKey } from '@tanstack/react-query';\nimport {\n  useQueryClient,\n  useSuspenseQuery,\n  type UseSuspenseQueryOptions,\n} from '@tanstack/react-query';\nimport { Effect, pipe, Schema } from 'effect';\nimport React, { Suspense, useCallback, useMemo } from 'react';\nimport ClientError from './client-error';\nimport Loader from './loader';\n/**\n * @module effect-data-loader\n *\n * Enhanced DataLoader for React using React Query, Effect, and Effect Schema validation.\n *\n * This module provides a generic, type-safe React component and hook for loading data asynchronously\n * with advanced error handling, runtime validation, caching, and developer experience. It is designed\n * to work with Effect, Effect Schema, and React Query, supporting features like retries, timeouts,\n * schema validation, optimistic updates, and more.\n *\n * ## Features\n * - Type-safe data loading for React components with Effect Schema validation\n * - Suspense support\n * - Runtime type validation with detailed error messages\n * - Customizable error and loading components\n * - Query caching and invalidation\n * - Optimistic updates\n * - Retry and timeout logic\n * - Render props and hook API\n * @see DataLoader\n * @see useDataLoader\n * @example\n * ```tsx\n * import { DataLoader } from './effect-data-loader';\n * import { Schema } from 'effect';\n *\n * const UserSchema = Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * });\n *\n * function UserList() {\n *   return (\n *     <DataLoader url=\"/api/users\" schema={UserSchema}>\n *       {(users) => (\n *         <ul>{users.map(u => <li key={u.id}>{u.name}</li>)}</ul>\n *       )}\n *     </DataLoader>\n *   );\n * }\n * ```\n */\n/**\n * Enhanced render props with additional query state and actions.\n *\n * @template T The type of the loaded data.\n */\nexport interface DataLoaderRenderProps<T> {\n  /** Manually trigger a refetch */\n  refetch: () => Promise<void>;\n  /** Whether the query is currently refetching */\n  isRefetching: boolean;\n  /** Query client for advanced operations */\n  queryClient: ReturnType<typeof useQueryClient>;\n  /** Invalidate this query's cache */\n  invalidate: () => Promise<void>;\n  /** Set query data optimistically */\n  setQueryData: (data: T | ((prev: T) => T)) => void;\n}\n\n/**\n * Base props for DataLoader without schema.\n */\nexport interface BaseDataLoaderProps<T> {\n  /** Additional props */\n  [key: string]: unknown;\n  /** URL to fetch data from */\n  url: string;\n  /** Additional React Query options */\n  queryOptions?: Partial<UseSuspenseQueryOptions<T, Error, T, QueryKey>>;\n  /** Custom loading component */\n  LoadingComponent?: React.ReactNode;\n  /** Custom error component */\n  ErrorComponent?: React.ComponentType<{ error: Error; retry: () => void }> | React.ReactElement;\n  /** Fetcher options (retries, timeout, etc.) */\n  options?: FetcherOptions<T>;\n  /** Query parameters */\n  params?: QueryParams;\n  /** Custom query key override */\n  queryKey?: QueryKey;\n  /** Callback fired when data is successfully loaded */\n  onSuccess?: (data: T) => void;\n  /** Callback fired when an error occurs */\n  onError?: (error: Error) => void;\n  /** Transform the data before passing to children */\n  transform?: (data: any) => T;\n  /** Stale time in milliseconds (default: 5 minutes) */\n  staleTime?: number;\n  /** Refetch interval in milliseconds or false to disable (default: 5 minutes) */\n  refetchInterval?: number | false;\n  /** Whether to refetch on window focus (default: false) */\n  refetchOnWindowFocus?: boolean;\n  /** Whether to refetch on reconnect (default: true) */\n  refetchOnReconnect?: boolean;\n}\n\n/**\n * Props for DataLoader without schema (manual typing).\n */\nexport interface DataLoaderProps<T> extends BaseDataLoaderProps<T> {\n  /**\n   * Render prop that receives data and optional utilities.\n   */\n  children:\n    | ((data: T) => React.ReactNode)\n    | ((data: T, utils: DataLoaderRenderProps<T>) => React.ReactNode);\n  /** Effect Schema for runtime validation (optional) */\n  schema?: never;\n}\n\n/**\n * Props for DataLoader with Effect Schema (automatic type inference).\n */\nexport interface DataLoaderPropsWithSchema<S extends Schema.Schema<any, any, never>>\n  extends BaseDataLoaderProps<Schema.Schema.Type<S>> {\n  /**\n   * Render prop that receives validated data and optional utilities.\n   */\n  children:\n    | ((data: Schema.Schema.Type<S>) => React.ReactNode)\n    | ((\n        data: Schema.Schema.Type<S>,\n        utils: DataLoaderRenderProps<Schema.Schema.Type<S>>,\n      ) => React.ReactNode);\n  /** Effect Schema for runtime validation */\n  schema: S;\n  /** Fetcher options with schema */\n  options?: FetcherOptions<Schema.Schema.Type<S>> & { schema: S };\n}\n\n/**\n * Enhanced DataLoader component with Effect Schema validation, better error handling, caching, and developer experience.\n *\n * @example Without schema\n * ```tsx\n * <DataLoader<User[]> url=\"/api/users\">\n *   {(users) => <UserList users={users} />}\n * </DataLoader>\n * ```\n *\n * @example With schema (automatic type inference)\n * ```tsx\n * const UsersSchema = Schema.Array(Schema.Struct({\n *   id: Schema.Number,\n *   name: Schema.String,\n *   email: Schema.String\n * }));\n *\n * <DataLoader url=\"/api/users\" schema={UsersSchema}>\n *   {(users) => <UserList users={users} />} // users is fully typed!\n * </DataLoader>\n * ```\n */\nexport function DataLoader<T = unknown>(props: DataLoaderProps<T>): React.ReactElement;\nexport function DataLoader<S extends Schema.Schema<any, any, never>>(\n  props: DataLoaderPropsWithSchema<S>,\n): React.ReactElement;\nexport function DataLoader<T = unknown, S extends Schema.Schema<any, any, never> = any>({\n  children,\n  url,\n  queryOptions = {},\n  LoadingComponent = <Loader />,\n  ErrorComponent = ClientError,\n  options = {},\n  params = {},\n  queryKey,\n  onSuccess,\n  onError,\n  transform,\n  staleTime = 1_000 * 60 * 5, // 5 minutes\n  refetchInterval = 1_000 * 60 * 5, // 5 minutes\n  refetchOnWindowFocus = false,\n  refetchOnReconnect = true,\n  schema,\n}: (DataLoaderProps<T> | DataLoaderPropsWithSchema<S>) & {\n  schema?: S;\n}): React.ReactElement {\n  const queryClient = useQueryClient();\n\n  // Generate stable query key including schema\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = options?.headers;\n    const timeout = options?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, options, schema]);\n\n  // Enhanced fetcher options with better defaults and schema support\n  const fetcherOptions = useMemo((): FetcherOptions<any> => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: (err) => {\n        const path = parseCodePathDetailed(url, fetcher);\n        logger.info(`[DataLoader]: ${path}`);\n\n        if (err instanceof FetcherError) {\n          logger.error(`[DataLoader]: Status ${err.status}`, err.responseData);\n        } else if (err instanceof ValidationError) {\n          logger.error(`[DataLoader]: Validation failed - ${err.getProblemsString()}`);\n          logger.error('[DataLoader]: Invalid data:', err.responseData);\n        } else {\n          logger.error('[DataLoader]: Unexpected error', err);\n        }\n\n        // Call user-provided error handler\n        if (onError && err instanceof Error) onError(err);\n      },\n      ...(options || null),\n    };\n\n    if (schema) return { ...baseOptions, schema };\n\n    return baseOptions;\n  }, [url, options, onError, schema]);\n\n  // Memoized query function with schema support and request deduplication\n  const queryFn = useCallback(async () => {\n    try {\n      // Wrap the Effect execution in the request queue for automatic deduplication\n      const result = await requestQueue.enqueue(\n        url,\n        'GET',\n        async () => {\n          const effect = pipe(\n            get(url, fetcherOptions, params),\n            Effect.provide(FetchHttpClient.layer),\n          );\n          return await Effect.runPromise(effect);\n        },\n        {\n          headers: fetcherOptions?.headers,\n          bypassDeduplication: false,\n        },\n      );\n\n      // Apply transformation if provided (note: schema validation happens first)\n      const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n      // Call success callback\n      if (onSuccess) onSuccess(finalResult);\n\n      return finalResult;\n    } catch (error) {\n      // Enhanced error handling for validation errors\n      if (error instanceof ValidationError) throw error;\n\n      if (error instanceof FetcherError) throw error;\n\n      // Wrap unexpected errors\n      throw new FetcherError(\n        error instanceof Error ? error.message : 'Unknown error occurred',\n        url,\n        undefined,\n        error,\n      );\n    }\n  }, [url, fetcherOptions, params, transform, onSuccess]);\n\n  // Enhanced query options\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        // Don't retry client errors (4xx)\n        if (\n          error instanceof ValidationError ||\n          (error instanceof FetcherError &&\n            error.status &&\n            error.status >= 400 &&\n            error.status < 500)\n        )\n          return false;\n\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions,\n    };\n\n    return baseOptions;\n  }, [\n    finalQueryKey,\n    queryFn,\n    staleTime,\n    refetchInterval,\n    refetchOnWindowFocus,\n    refetchOnReconnect,\n    queryOptions,\n  ]);\n\n  const { data, error, refetch, isRefetching } = useSuspenseQuery(queryOptionsWithDefaults);\n\n  // Enhanced render props\n  const renderProps = useMemo(() => {\n    const props: DataLoaderRenderProps<any> = {\n      refetch: async () => {\n        await refetch();\n      },\n      isRefetching,\n      queryClient,\n      invalidate: async () => {\n        await queryClient.invalidateQueries({ queryKey: finalQueryKey });\n      },\n      setQueryData: (newData: any) => {\n        queryClient.setQueryData(finalQueryKey, newData);\n      },\n    };\n    return props;\n  }, [refetch, isRefetching, queryClient, finalQueryKey]);\n\n  // Enhanced error component with retry capability and validation error support\n  const renderError = useCallback(\n    (error: Error) => {\n      if (React.isValidElement(ErrorComponent)) {\n        return React.cloneElement(ErrorComponent as React.ReactElement<any>, {\n          error,\n          retry: () => refetch(),\n        });\n      }\n\n      const Component = ErrorComponent as React.ComponentType<{\n        error: Error;\n        retry: () => void;\n      }>;\n      return <Component error={error} retry={() => refetch()} />;\n    },\n    [ErrorComponent, refetch],\n  );\n\n  // Determine how to call children function\n  const renderChildren = useCallback(() => {\n    if (typeof children === 'function') {\n      // Check if it's a function that accepts 2 parameters (data + utils)\n      try {\n        const result =\n          children.length > 1 ? (children as any)(data, renderProps) : (children as any)(data);\n        return result;\n      } catch {\n        // Fallback to simple call if inspection fails\n        return (children as any)(data);\n      }\n    }\n    return null;\n  }, [children, data, renderProps]);\n\n  return (\n    <Suspense fallback={LoadingComponent}>{error ? renderError(error) : renderChildren()}</Suspense>\n  );\n}\n\nDataLoader.displayName = 'DataLoader';\n\n/**\n * Hook version of DataLoader for use outside of JSX.\n */\nexport function useDataLoader<T = unknown>(\n  url: string,\n  options?: Omit<DataLoaderProps<T>, 'children' | 'LoadingComponent' | 'ErrorComponent'>,\n): ReturnType<typeof useSuspenseQuery<T, Error, T, QueryKey>>;\n\nexport function useDataLoader<S extends Schema.Schema<any, any, never>>(\n  url: string,\n  options: Omit<DataLoaderPropsWithSchema<S>, 'children' | 'LoadingComponent' | 'ErrorComponent'>,\n): ReturnType<\n  typeof useSuspenseQuery<Schema.Schema.Type<S>, Error, Schema.Schema.Type<S>, QueryKey>\n>;\n\nexport function useDataLoader(url: string, options: any = {}) {\n  const {\n    queryOptions = {},\n    options: fetcherOptions = {},\n    params = {},\n    queryKey,\n    onSuccess,\n    onError,\n    transform,\n    staleTime = 1_000 * 60 * 5,\n    refetchInterval = 1_000 * 60 * 5,\n    refetchOnWindowFocus = false,\n    refetchOnReconnect = true,\n    schema,\n  } = options;\n\n  const finalQueryKey = useMemo(() => {\n    if (queryKey) return queryKey;\n    const headers = fetcherOptions?.headers;\n    const timeout = fetcherOptions?.timeout;\n    const schemaKey = schema ? `schema:${Schema.format(schema)}` : null;\n    const keyArray = ['dataloader', url, params, headers, timeout, schemaKey].filter(Boolean);\n    return keyArray;\n  }, [queryKey, url, params, fetcherOptions, schema]);\n\n  const enhancedFetcherOptions = useMemo(() => {\n    const baseOptions: FetcherOptions<any> = {\n      retries: 3,\n      retryDelay: 1_000,\n      timeout: 30_000,\n      onError: (err) => {\n        if (err instanceof ValidationError) {\n          logger.error(`[useDataLoader]: Validation failed - ${err.getProblemsString()}`);\n        }\n\n        if (typeof onError === 'function' && err instanceof Error) {\n          onError(err);\n        }\n      },\n      ...(fetcherOptions || null),\n    };\n\n    if (schema) {\n      return { ...baseOptions, schema };\n    }\n\n    return baseOptions;\n  }, [fetcherOptions, onError, schema]);\n\n  const queryFn = useCallback(async () => {\n    // Wrap the Effect execution in the request queue for automatic deduplication\n    const result = await requestQueue.enqueue(\n      url,\n      'GET',\n      async () => {\n        const effect = pipe(\n          get(url, enhancedFetcherOptions, params as QueryParams),\n          Effect.provide(FetchHttpClient.layer),\n        );\n        return await Effect.runPromise(effect);\n      },\n      {\n        headers: enhancedFetcherOptions?.headers,\n        bypassDeduplication: false,\n      },\n    );\n\n    const finalResult = transform && typeof transform === 'function' ? transform(result) : result;\n\n    if (typeof onSuccess === 'function') {\n      onSuccess(finalResult);\n    }\n\n    return finalResult;\n  }, [url, enhancedFetcherOptions, params, transform, onSuccess]);\n\n  const queryOptionsWithDefaults = useMemo(() => {\n    const baseOptions: UseSuspenseQueryOptions<any, Error, any, QueryKey> = {\n      queryKey: finalQueryKey as QueryKey,\n      queryFn,\n      staleTime,\n      refetchInterval,\n      refetchOnWindowFocus,\n      refetchOnReconnect,\n      retry: (failureCount: number, error: unknown) => {\n        if (\n          error instanceof ValidationError ||\n          (error instanceof FetcherError &&\n            error.status &&\n            error.status >= 400 &&\n            error.status < 500)\n        ) {\n          return false;\n        }\n        return failureCount < 3;\n      },\n      retryDelay: (attemptIndex: number) => Math.min(1_000 * 2 ** attemptIndex, 30_000),\n      ...queryOptions,\n    };\n\n    return baseOptions;\n  }, [\n    finalQueryKey,\n    queryFn,\n    staleTime,\n    refetchInterval,\n    refetchOnWindowFocus,\n    refetchOnReconnect,\n    queryOptions,\n  ]);\n\n  return useSuspenseQuery(queryOptionsWithDefaults);\n}\n\nexport default DataLoader;\n"
        ],
        "mappings": "AAAA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SACEA,OAAO,EACPC,YAAY,EACZ,KAAKC,cAAc,EACnBC,GAAG,EACHC,MAAM,EACNC,qBAAqB,EACrB,KAAKC,WAAW,EAChBC,YAAY,EACZC,eAAe,QACV,SAAS;AAChB,SAASC,eAAe,QAAQ,kBAAkB;AAClD,cAAcC,QAAQ,QAAQ,uBAAuB;AACrD,SACEC,cAAc,EACdC,gBAAgB,EAChB,KAAKC,uBAAuB,QACvB,uBAAuB;AAC9B,SAASC,MAAM,EAAEC,IAAI,EAAEC,MAAM,QAAQ,QAAQ;AAC7C,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AAC7D,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAOC,MAAM,MAAM,UAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,UAAUC,qBAAqB,CAAC,CAAC,CAAC,CAAC;EACxC;EACAC,OAAO,EAAE,GAAG,GAAGC,OAAO,CAAC,IAAI,CAAC;EAC5B;EACAC,YAAY,EAAE,OAAO;EACrB;EACAC,WAAW,EAAEC,UAAU,CAAC,OAAOjB,cAAc,CAAC;EAC9C;EACAkB,UAAU,EAAE,GAAG,GAAGJ,OAAO,CAAC,IAAI,CAAC;EAC/B;EACAK,YAAY,EAAE,CAACC,IAAI,EAAEC,CAAC,GAAG,CAAC,CAACC,IAAI,EAAED,CAAC,EAAE,GAAGA,CAAC,CAAC,EAAE,GAAG,IAAI;AACpD;;AAEA;AACA;AACA;AACA,OAAO,UAAUE,mBAAmB,CAAC,CAAC,CAAC,CAAC;EACtC;EACA,CAACC,GAAG,EAAE,MAAM,CAAC,EAAE,OAAO;EACtB;EACAC,GAAG,EAAE,MAAM;EACX;EACAC,YAAY,CAAC,EAAEC,OAAO,CAACzB,uBAAuB,CAACmB,CAAC,EAAEO,KAAK,EAAEP,CAAC,EAAEtB,QAAQ,CAAC,CAAC;EACtE;EACA8B,gBAAgB,CAAC,EAAEvB,KAAK,CAACwB,SAAS;EAClC;EACAC,cAAc,CAAC,EAAEzB,KAAK,CAAC0B,aAAa,CAAC;IAAEC,KAAK,EAAEL,KAAK;IAAEM,KAAK,EAAE,GAAG,GAAG,IAAI;EAAC,CAAC,CAAC,GAAG5B,KAAK,CAAC6B,YAAY;EAC9F;EACAC,OAAO,CAAC,EAAE7C,cAAc,CAAC8B,CAAC,CAAC;EAC3B;EACAgB,MAAM,CAAC,EAAE1C,WAAW;EACpB;EACA2C,QAAQ,CAAC,EAAEvC,QAAQ;EACnB;EACAwC,SAAS,CAAC,EAAE,CAACnB,IAAI,EAAEC,CAAC,EAAE,GAAG,IAAI;EAC7B;EACAmB,OAAO,CAAC,EAAE,CAACP,KAAK,EAAEL,KAAK,EAAE,GAAG,IAAI;EAChC;EACAa,SAAS,CAAC,EAAE,CAACrB,IAAI,EAAE,GAAG,EAAE,GAAGC,CAAC;EAC5B;EACAqB,SAAS,CAAC,EAAE,MAAM;EAClB;EACAC,eAAe,CAAC,EAAE,MAAM,GAAG,KAAK;EAChC;EACAC,oBAAoB,CAAC,EAAE,OAAO;EAC9B;EACAC,kBAAkB,CAAC,EAAE,OAAO;AAC9B;;AAEA;AACA;AACA;AACA,OAAO,UAAUC,eAAe,CAAC,CAAC,CAAC,SAASvB,mBAAmB,CAACF,CAAC,CAAC,CAAC;EACjE;AACF;AACA;EACE0B,QAAQ,EACJ,CAAC,CAAC3B,IAAI,EAAEC,CAAC,EAAE,GAAGf,KAAK,CAACwB,SAAS,CAAC,GAC9B,CAAC,CAACV,IAAI,EAAEC,CAAC,EAAE2B,KAAK,EAAEpC,qBAAqB,CAACS,CAAC,CAAC,EAAE,GAAGf,KAAK,CAACwB,SAAS,CAAC;EACnE;EACAmB,MAAM,CAAC,EAAE,KAAK;AAChB;;AAEA;AACA;AACA;AACA,OAAO,UAAUC,yBAAyB,CAAC,UAAU7C,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC,SAC1EkB,mBAAmB,CAAClB,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC;EACnD;AACF;AACA;EACEL,QAAQ,EACJ,CAAC,CAAC3B,IAAI,EAAEf,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAAE,GAAG9C,KAAK,CAACwB,SAAS,CAAC,GAClD,CAAC,CACCV,IAAI,EAAEf,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAC3BJ,KAAK,EAAEpC,qBAAqB,CAACP,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,CAAC,EACnD,GAAG9C,KAAK,CAACwB,SAAS,CAAC;EACzB;EACAmB,MAAM,EAAEG,CAAC;EACT;EACAhB,OAAO,CAAC,EAAE7C,cAAc,CAACc,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,CAAC,GAAG;IAAEH,MAAM,EAAEG,CAAC;EAAC,CAAC;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAU,CAAC,IAAI,OAAO,CAACA,CAACC,KAAK,EAAER,eAAe,CAACzB,CAAC,CAAC,CAAC,EAAEf,KAAK,CAAC6B,YAAY;AACtF,OAAO,SAASkB,UAAU,CAAC,UAAUhD,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAACgD,CAClEC,KAAK,EAAEJ,yBAAyB,CAACE,CAAC,CAAC,CACpC,EAAE9C,KAAK,CAAC6B,YAAY;AACrB,OAAO,SAASkB,UAAU,CAAC,IAAI,OAAO,EAAE,UAAUhD,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,GAAG,GAAG,CAACgD,CAAC;EACtFN,QAAQ;EACRtB,GAAG;EACHC,YAAY,GAAG,CAAC,CAAC;EACjBG,gBAAgB,GAAG,CAAC,MAAM,GAAG;EAC7BE,cAAc,GAAGrB,WAAW;EAC5B0B,OAAO,GAAG,CAAC,CAAC;EACZC,MAAM,GAAG,CAAC,CAAC;EACXC,QAAQ;EACRC,SAAS;EACTC,OAAO;EACPC,SAAS;EACTC,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;EAAE;EAC5BC,eAAe,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;EAAE;EAClCC,oBAAoB,GAAG,KAAK;EAC5BC,kBAAkB,GAAG,IAAI;EACzBI;AAGF,CAFC,EAAE,CAACH,eAAe,CAACzB,CAAC,CAAC,GAAG6B,yBAAyB,CAACE,CAAC,CAAC,CAAC,GAAG;EACvDH,MAAM,CAAC,EAAEG,CAAC;AACZ,CAAC,CAAC,EAAE9C,KAAK,CAAC6B,YAAY,CAAC;EACrB,MAAMnB,WAAW,GAAGhB,cAAc,CAAC,CAAC;;EAEpC;EACA,MAAMuD,aAAa,GAAG9C,OAAO,CAAC,MAAM;IAClC,IAAI6B,QAAQ,EAAE,OAAOA,QAAQ;IAC7B,MAAMkB,OAAO,GAAGpB,OAAO,EAAEoB,OAAO;IAChC,MAAMC,OAAO,GAAGrB,OAAO,EAAEqB,OAAO;IAChC,MAAMC,SAAS,GAAGT,MAAM,GAAG,UAAU5C,MAAM,CAACsD,MAAM,CAACV,MAAM,CAAC,EAAE,GAAG,IAAI;IACnE,MAAMW,QAAQ,GAAG,CAAC,YAAY,EAAEnC,GAAG,EAAEY,MAAM,EAAEmB,OAAO,EAAEC,OAAO,EAAEC,SAAS,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC;IACzF,OAAOF,QAAQ;EACjB,CAAC,EAAE,CAACtB,QAAQ,EAAEb,GAAG,EAAEY,MAAM,EAAED,OAAO,EAAEa,MAAM,CAAC,CAAC;;EAE5C;EACA,MAAMc,cAAc,GAAGtD,OAAO,CAAC,EAAE,EAAElB,cAAc,CAAC,GAAG,CAAC,IAAI;IACxD,MAAMyE,WAAW,EAAEzE,cAAc,CAAC,GAAG,CAAC,GAAG;MACvC0E,OAAO,EAAE,CAAC;MACVC,UAAU,EAAE,KAAK;MACjBT,OAAO,EAAE,MAAM;MACfjB,OAAO,EAAG2B,GAAG,IAAK;QAChB,MAAMC,IAAI,GAAG1E,qBAAqB,CAAC+B,GAAG,EAAEpC,OAAO,CAAC;QAChDI,MAAM,CAAC4E,IAAI,CAAC,iBAAiBD,IAAI,EAAE,CAAC;QAEpC,IAAID,GAAG,YAAY7E,YAAY,EAAE;UAC/BG,MAAM,CAACwC,KAAK,CAAC,wBAAwBkC,GAAG,CAACG,MAAM,EAAE,EAAEH,GAAG,CAACI,YAAY,CAAC;QACtE,CAAC,MAAM,IAAIJ,GAAG,YAAYtE,eAAe,EAAE;UACzCJ,MAAM,CAACwC,KAAK,CAAC,qCAAqCkC,GAAG,CAACK,iBAAiB,CAAC,CAAC,EAAE,CAAC;UAC5E/E,MAAM,CAACwC,KAAK,CAAC,6BAA6B,EAAEkC,GAAG,CAACI,YAAY,CAAC;QAC/D,CAAC,MAAM;UACL9E,MAAM,CAACwC,KAAK,CAAC,gCAAgC,EAAEkC,GAAG,CAAC;QACrD;;QAEA;QACA,IAAI3B,OAAO,IAAI2B,GAAG,YAAYvC,KAAK,EAAEY,OAAO,CAAC2B,GAAG,CAAC;MACnD,CAAC;MACD,IAAI/B,OAAO,IAAI,IAAI;IACrB,CAAC;IAED,IAAIa,MAAM,EAAE,OAAO;MAAE,GAAGe,WAAW;MAAEf;IAAO,CAAC;IAE7C,OAAOe,WAAW;EACpB,CAAC,EAAE,CAACvC,GAAG,EAAEW,OAAO,EAAEI,OAAO,EAAES,MAAM,CAAC,CAAC;;EAEnC;EACA,MAAMwB,OAAO,GAAGjE,WAAW,CAAC,YAAY;IACtC,IAAI;MACF;MACA,MAAMkE,MAAM,GAAG,MAAM9E,YAAY,CAAC+E,OAAO,CACvClD,GAAG,EACH,KAAK,EACL,YAAY;QACV,MAAMmD,MAAM,GAAGxE,IAAI,CACjBZ,GAAG,CAACiC,GAAG,EAAEsC,cAAc,EAAE1B,MAAM,CAAC,EAChClC,MAAM,CAAC0E,OAAO,CAAC/E,eAAe,CAACgF,KAAK,CACtC,CAAC;QACD,OAAO,MAAM3E,MAAM,CAAC4E,UAAU,CAACH,MAAM,CAAC;MACxC,CAAC,EACD;QACEpB,OAAO,EAAEO,cAAc,EAAEP,OAAO;QAChCwB,mBAAmB,EAAE;MACvB,CACF,CAAC;;MAED;MACA,MAAMC,WAAW,GAAGxC,SAAS,IAAI,OAAOA,SAAS,KAAK,UAAU,GAAGA,SAAS,CAACiC,MAAM,CAAC,GAAGA,MAAM;;MAE7F;MACA,IAAInC,SAAS,EAAEA,SAAS,CAAC0C,WAAW,CAAC;MAErC,OAAOA,WAAW;IACpB,CAAC,CAAC,OAAOhD,KAAK,EAAE;MACd;MACA,IAAIA,KAAK,YAAYpC,eAAe,EAAE,MAAMoC,KAAK;MAEjD,IAAIA,KAAK,YAAY3C,YAAY,EAAE,MAAM2C,KAAK;;MAE9C;MACA,MAAM,IAAI3C,YAAY,CACpB2C,KAAK,YAAYL,KAAK,GAAGK,KAAK,CAACiD,OAAO,GAAG,wBAAwB,EACjEzD,GAAG,EACH0D,SAAS,EACTlD,KACF,CAAC;IACH;EACF,CAAC,EAAE,CAACR,GAAG,EAAEsC,cAAc,EAAE1B,MAAM,EAAEI,SAAS,EAAEF,SAAS,CAAC,CAAC;;EAEvD;EACA,MAAM6C,wBAAwB,GAAG3E,OAAO,CAAC,MAAM;IAC7C,MAAMuD,WAAW,EAAE9D,uBAAuB,CAAC,GAAG,EAAE0B,KAAK,EAAE,GAAG,EAAE7B,QAAQ,CAAC,GAAG;MACtEuC,QAAQ,EAAEiB,aAAa;MACvBkB,OAAO;MACP/B,SAAS;MACTC,eAAe;MACfC,oBAAoB;MACpBC,kBAAkB;MAClBX,KAAK,EAAEA,CAACmD,YAAY,EAAE,MAAM,EAAEpD,KAAK,EAAE,OAAO,KAAK;QAC/C;QACA,IACEA,KAAK,YAAYpC,eAAe,IAC/BoC,KAAK,YAAY3C,YAAY,IAC5B2C,KAAK,CAACqC,MAAM,IACZrC,KAAK,CAACqC,MAAM,IAAI,GAAG,IACnBrC,KAAK,CAACqC,MAAM,GAAG,GAAI,EAErB,OAAO,KAAK;QAEd,OAAOe,YAAY,GAAG,CAAC;MACzB,CAAC;MACDnB,UAAU,EAAEA,CAACoB,YAAY,EAAE,MAAM,KAAKC,IAAI,CAACC,GAAG,CAAC,KAAK,GAAG,CAAC,IAAIF,YAAY,EAAE,MAAM,CAAC;MACjF,GAAG5D;IACL,CAAC;IAED,OAAOsC,WAAW;EACpB,CAAC,EAAE,CACDT,aAAa,EACbkB,OAAO,EACP/B,SAAS,EACTC,eAAe,EACfC,oBAAoB,EACpBC,kBAAkB,EAClBnB,YAAY,CACb,CAAC;EAEF,MAAM;IAAEN,IAAI;IAAEa,KAAK;IAAEpB,OAAO;IAAEE;EAAa,CAAC,GAAGd,gBAAgB,CAACmF,wBAAwB,CAAC;;EAEzF;EACA,MAAMK,WAAW,GAAGhF,OAAO,CAAC,MAAM;IAChC,MAAM6C,KAAK,EAAE1C,qBAAqB,CAAC,GAAG,CAAC,GAAG;MACxCC,OAAO,EAAE,MAAAA,CAAA,KAAY;QACnB,MAAMA,OAAO,CAAC,CAAC;MACjB,CAAC;MACDE,YAAY;MACZC,WAAW;MACXE,UAAU,EAAE,MAAAA,CAAA,KAAY;QACtB,MAAMF,WAAW,CAAC0E,iBAAiB,CAAC;UAAEpD,QAAQ,EAAEiB;QAAc,CAAC,CAAC;MAClE,CAAC;MACDpC,YAAY,EAAEA,CAACwE,OAAO,EAAE,GAAG,KAAK;QAC9B3E,WAAW,CAACG,YAAY,CAACoC,aAAa,EAAEoC,OAAO,CAAC;MAClD;IACF,CAAC;IACD,OAAOrC,KAAK;EACd,CAAC,EAAE,CAACzC,OAAO,EAAEE,YAAY,EAAEC,WAAW,EAAEuC,aAAa,CAAC,CAAC;;EAEvD;EACA,MAAMqC,WAAW,GAAGpF,WAAW,CAC7B,CAACyB,KAAK,EAAEL,KAAK,KAAK;IAChB,IAAItB,KAAK,CAACuF,cAAc,CAAC9D,cAAc,CAAC,EAAE;MACxC,OAAOzB,KAAK,CAACwF,YAAY,CAAC/D,cAAc,IAAIzB,KAAK,CAAC6B,YAAY,CAAC,GAAG,CAAC,EAAE;QACnEF,KAAK;QACLC,KAAK,EAAEA,CAAA,KAAMrB,OAAO,CAAC;MACvB,CAAC,CAAC;IACJ;IAEA,MAAMkF,SAAS,GAAGhE,cAAc,IAAIzB,KAAK,CAAC0B,aAAa,CAAC;MACtDC,KAAK,EAAEL,KAAK;MACZM,KAAK,EAAE,GAAG,GAAG,IAAI;IACnB,CAAC,CAAC;IACF,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAACD,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,MAAMpB,OAAO,CAAC,CAAC,CAAC,GAAG;EAC5D,CAAC,EACD,CAACkB,cAAc,EAAElB,OAAO,CAC1B,CAAC;;EAED;EACA,MAAMmF,cAAc,GAAGxF,WAAW,CAAC,MAAM;IACvC,IAAI,OAAOuC,QAAQ,KAAK,UAAU,EAAE;MAClC;MACA,IAAI;QACF,MAAM2B,MAAM,GACV3B,QAAQ,CAACkD,MAAM,GAAG,CAAC,GAAG,CAAClD,QAAQ,IAAI,GAAG,EAAE3B,IAAI,EAAEqE,WAAW,CAAC,GAAG,CAAC1C,QAAQ,IAAI,GAAG,EAAE3B,IAAI,CAAC;QACtF,OAAOsD,MAAM;MACf,CAAC,CAAC,MAAM;QACN;QACA,OAAO,CAAC3B,QAAQ,IAAI,GAAG,EAAE3B,IAAI,CAAC;MAChC;IACF;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAAC2B,QAAQ,EAAE3B,IAAI,EAAEqE,WAAW,CAAC,CAAC;EAEjC,OACE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC5D,gBAAgB,CAAC,6GAAC,CAACI,KAAK,GAAG2D,WAAW,CAAC3D,KAAK,CAAC,GAAG+D,cAAc,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC;AAEpG;AAEA3C,UAAU,CAAC6C,WAAW,GAAG,YAAY;;AAErC;AACA;AACA;AACA,OAAO,SAASC,aAAa,CAAC,IAAI,OAAO,CAACA,CACxC1E,GAAG,EAAE,MAAM,EACXW,OAAsF,CAA9E,EAAEgE,IAAI,CAACtD,eAAe,CAACzB,CAAC,CAAC,EAAE,UAAU,GAAG,kBAAkB,GAAG,gBAAgB,CAAC,CACvF,EAAEJ,UAAU,CAAC,OAAOhB,gBAAgB,CAACoB,CAAC,EAAEO,KAAK,EAAEP,CAAC,EAAEtB,QAAQ,CAAC,CAAC;AAE7D,OAAO,SAASoG,aAAa,CAAC,UAAU9F,MAAM,CAACA,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC8F,CACrE1E,GAAG,EAAE,MAAM,EACXW,OAAO,EAAEgE,IAAI,CAAClD,yBAAyB,CAACE,CAAC,CAAC,EAAE,UAAU,GAAG,kBAAkB,GAAG,gBAAgB,CAAC,CAChG,EAAEnC,UAAU,CACX,OAAOhB,gBAAgB,CAACI,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAAExB,KAAK,EAAEvB,MAAM,CAACA,MAAM,CAAC8C,IAAI,CAACC,CAAC,CAAC,EAAErD,QAAQ,CAAC,CACvF;AAED,OAAO,SAASoG,aAAaA,CAAC1E,GAAG,EAAE,MAAM,EAAEW,OAAO,EAAE,GAAG,GAAG,CAAC,CAAC,EAAE;EAC5D,MAAM;IACJV,YAAY,GAAG,CAAC,CAAC;IACjBU,OAAO,EAAE2B,cAAc,GAAG,CAAC,CAAC;IAC5B1B,MAAM,GAAG,CAAC,CAAC;IACXC,QAAQ;IACRC,SAAS;IACTC,OAAO;IACPC,SAAS;IACTC,SAAS,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;IAC1BC,eAAe,GAAG,KAAK,GAAG,EAAE,GAAG,CAAC;IAChCC,oBAAoB,GAAG,KAAK;IAC5BC,kBAAkB,GAAG,IAAI;IACzBI;EACF,CAAC,GAAGb,OAAO;EAEX,MAAMmB,aAAa,GAAG9C,OAAO,CAAC,MAAM;IAClC,IAAI6B,QAAQ,EAAE,OAAOA,QAAQ;IAC7B,MAAMkB,OAAO,GAAGO,cAAc,EAAEP,OAAO;IACvC,MAAMC,OAAO,GAAGM,cAAc,EAAEN,OAAO;IACvC,MAAMC,SAAS,GAAGT,MAAM,GAAG,UAAU5C,MAAM,CAACsD,MAAM,CAACV,MAAM,CAAC,EAAE,GAAG,IAAI;IACnE,MAAMW,QAAQ,GAAG,CAAC,YAAY,EAAEnC,GAAG,EAAEY,MAAM,EAAEmB,OAAO,EAAEC,OAAO,EAAEC,SAAS,CAAC,CAACG,MAAM,CAACC,OAAO,CAAC;IACzF,OAAOF,QAAQ;EACjB,CAAC,EAAE,CAACtB,QAAQ,EAAEb,GAAG,EAAEY,MAAM,EAAE0B,cAAc,EAAEd,MAAM,CAAC,CAAC;EAEnD,MAAMoD,sBAAsB,GAAG5F,OAAO,CAAC,MAAM;IAC3C,MAAMuD,WAAW,EAAEzE,cAAc,CAAC,GAAG,CAAC,GAAG;MACvC0E,OAAO,EAAE,CAAC;MACVC,UAAU,EAAE,KAAK;MACjBT,OAAO,EAAE,MAAM;MACfjB,OAAO,EAAG2B,GAAG,IAAK;QAChB,IAAIA,GAAG,YAAYtE,eAAe,EAAE;UAClCJ,MAAM,CAACwC,KAAK,CAAC,wCAAwCkC,GAAG,CAACK,iBAAiB,CAAC,CAAC,EAAE,CAAC;QACjF;QAEA,IAAI,OAAOhC,OAAO,KAAK,UAAU,IAAI2B,GAAG,YAAYvC,KAAK,EAAE;UACzDY,OAAO,CAAC2B,GAAG,CAAC;QACd;MACF,CAAC;MACD,IAAIJ,cAAc,IAAI,IAAI;IAC5B,CAAC;IAED,IAAId,MAAM,EAAE;MACV,OAAO;QAAE,GAAGe,WAAW;QAAEf;MAAO,CAAC;IACnC;IAEA,OAAOe,WAAW;EACpB,CAAC,EAAE,CAACD,cAAc,EAAEvB,OAAO,EAAES,MAAM,CAAC,CAAC;EAErC,MAAMwB,OAAO,GAAGjE,WAAW,CAAC,YAAY;IACtC;IACA,MAAMkE,MAAM,GAAG,MAAM9E,YAAY,CAAC+E,OAAO,CACvClD,GAAG,EACH,KAAK,EACL,YAAY;MACV,MAAMmD,MAAM,GAAGxE,IAAI,CACjBZ,GAAG,CAACiC,GAAG,EAAE4E,sBAAsB,EAAEhE,MAAM,IAAI1C,WAAW,CAAC,EACvDQ,MAAM,CAAC0E,OAAO,CAAC/E,eAAe,CAACgF,KAAK,CACtC,CAAC;MACD,OAAO,MAAM3E,MAAM,CAAC4E,UAAU,CAACH,MAAM,CAAC;IACxC,CAAC,EACD;MACEpB,OAAO,EAAE6C,sBAAsB,EAAE7C,OAAO;MACxCwB,mBAAmB,EAAE;IACvB,CACF,CAAC;IAED,MAAMC,WAAW,GAAGxC,SAAS,IAAI,OAAOA,SAAS,KAAK,UAAU,GAAGA,SAAS,CAACiC,MAAM,CAAC,GAAGA,MAAM;IAE7F,IAAI,OAAOnC,SAAS,KAAK,UAAU,EAAE;MACnCA,SAAS,CAAC0C,WAAW,CAAC;IACxB;IAEA,OAAOA,WAAW;EACpB,CAAC,EAAE,CAACxD,GAAG,EAAE4E,sBAAsB,EAAEhE,MAAM,EAAEI,SAAS,EAAEF,SAAS,CAAC,CAAC;EAE/D,MAAM6C,wBAAwB,GAAG3E,OAAO,CAAC,MAAM;IAC7C,MAAMuD,WAAW,EAAE9D,uBAAuB,CAAC,GAAG,EAAE0B,KAAK,EAAE,GAAG,EAAE7B,QAAQ,CAAC,GAAG;MACtEuC,QAAQ,EAAEiB,aAAa,IAAIxD,QAAQ;MACnC0E,OAAO;MACP/B,SAAS;MACTC,eAAe;MACfC,oBAAoB;MACpBC,kBAAkB;MAClBX,KAAK,EAAEA,CAACmD,YAAY,EAAE,MAAM,EAAEpD,KAAK,EAAE,OAAO,KAAK;QAC/C,IACEA,KAAK,YAAYpC,eAAe,IAC/BoC,KAAK,YAAY3C,YAAY,IAC5B2C,KAAK,CAACqC,MAAM,IACZrC,KAAK,CAACqC,MAAM,IAAI,GAAG,IACnBrC,KAAK,CAACqC,MAAM,GAAG,GAAI,EACrB;UACA,OAAO,KAAK;QACd;QACA,OAAOe,YAAY,GAAG,CAAC;MACzB,CAAC;MACDnB,UAAU,EAAEA,CAACoB,YAAY,EAAE,MAAM,KAAKC,IAAI,CAACC,GAAG,CAAC,KAAK,GAAG,CAAC,IAAIF,YAAY,EAAE,MAAM,CAAC;MACjF,GAAG5D;IACL,CAAC;IAED,OAAOsC,WAAW;EACpB,CAAC,EAAE,CACDT,aAAa,EACbkB,OAAO,EACP/B,SAAS,EACTC,eAAe,EACfC,oBAAoB,EACpBC,kBAAkB,EAClBnB,YAAY,CACb,CAAC;EAEF,OAAOzB,gBAAgB,CAACmF,wBAAwB,CAAC;AACnD;AAEA,eAAe/B,UAAU",
        "ignoreList": []
      }
    },
    {
      "name": "comlink",
      "start": 1768772628358,
      "end": 1768772628358,
      "order": "normal"
    },
    {
      "name": "sentry-vite-bundle-size-optimizations-plugin",
      "start": 1768772628359,
      "end": 1768772628359,
      "order": "normal"
    },
    {
      "name": "vite-plugin-csp-guard",
      "start": 1768772628360,
      "end": 1768772628360,
      "order": "post-post"
    }
  ]
}
